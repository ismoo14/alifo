<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MediQuiz Pro | Advanced Medical Education</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style type="text/css">
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        :root {
            --primary: #3b82f6; 
            --primary-dark: #2563eb; 
            --primary-light: #dbeafe; 
            --secondary: #6b7280; 
            --success: #22c55e; 
            --error: #ef4444; 
            --warning: #eab308; 
            --info: #0ea5e9; 
            --background: #ffffff; 
            --surface: #f9fafb; 
            --text-primary: #111827; 
            --text-secondary: #4b5563; 
            --text-tertiary: #9ca3af; 
            --border: #e5e7eb; 
            --shadow: 0 2px 4px rgba(0, 0, 0, 0.05); 
            --shadow-lg: 0 4px 8px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 8px 16px rgba(0, 0, 0, 0.05);
            --radius: 8px; 
            --radius-lg: 12px;
            --radius-xl: 16px;
            --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1); 
            --gradient: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
            --glass: rgba(255, 255, 255, 0.85); 
            --glass-border: rgba(229, 231, 235, 0.3);
        }

        .dark-mode {
            --primary: #60a5fa;
            --primary-dark: #3b82f6;
            --primary-light: #93c5fd;
            --secondary: #94a3b8;
            --background: #000000; 
            --surface: #111827; 
            --text-primary: #f9fafb; 
            --text-secondary: #d1d5db; 
            --text-tertiary: #6b7280; 
            --border: #1f2937; 
            --shadow: 0 2px 4px rgba(0, 0, 0, 0.6); 
            --shadow-lg: 0 4px 8px rgba(0, 0, 0, 0.6);
            --shadow-xl: 0 8px 16px rgba(0, 0, 0, 0.6);
            --glass: rgba(17, 24, 39, 0.85); 
            --glass-border: rgba(31, 41, 55, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none; 
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 16px;
            transition: var(--transition);
            min-height: 100vh;
            overflow-x: hidden;
            overflow-y: auto;
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-light);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background: var(--surface);
            border-right: 1px solid var(--border);
            padding: 24px 0;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: var(--shadow);
            transform: translateX(-100%);
        }

        .sidebar.open {
            transform: translateX(0);
        }

        .sidebar-header {
            padding: 0 24px 16px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 24px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 22px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .logo i {
            font-size: 24px;
        }

        .sidebar-subtitle {
            font-size: 13px;
            color: var(--text-tertiary);
            font-weight: 400;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 24px;
            margin-bottom: 24px;
            background: var(--glass);
            border-radius: var(--radius);
            margin: 0 16px 24px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 16px;
            box-shadow: var(--shadow);
        }

        .user-info h3 {
            font-size: 15px;
            font-weight: 500;
            margin-bottom: 2px;
            color: var(--text-primary);
        }

        .user-info p {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 24px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: var(--glass);
            border-left-color: var(--primary);
            box-shadow: var(--shadow);
        }

        .nav-item.active {
            background: var(--primary-light);
            color: var(--primary);
            border-left-color: var(--primary);
        }

        .nav-item.active .nav-icon {
            color: var(--primary);
        }

        .nav-icon {
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
        }

        .categories-section {
            margin-top: 24px;
        }

        .section-title {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 16px;
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .categories-grid {
            padding: 0 16px;
        }

        .category-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .category-card:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .category-card.active {
            background: var(--primary-light);
            border-color: var(--primary);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .category-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
        }

        .category-card.active .category-icon {
            background: var(--primary);
        }

        .category-name {
            font-weight: 500;
            font-size: 14px;
            color: var(--text-primary);
        }

        .category-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
        }

        .progress-bar {
            flex: 1;
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            overflow: hidden;
            margin-right: 8px;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 2px;
            transition: width 0.4s ease;
        }

        .progress-text {
            font-size: 12px;
            color: var(--text-tertiary);
            font-weight: 500;
        }

        .category-card.active .progress-text {
            color: var(--primary);
        }

        .main-content {
            flex: 1;
            margin-left: 0;
            transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .main-content.sidebar-open {
            margin-left: 280px;
        }

        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 32px;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .menu-toggle {
            background: none;
            border: none;
            font-size: 20px;
            color: var(--text-primary);
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius);
            transition: var(--transition);
        }

        .menu-toggle:hover {
            background: var(--primary-light);
        }

        .page-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .mode-selector {
            display: flex;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 4px;
        }

        .mode-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--text-primary);
        }

        .mode-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: var(--shadow);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
            padding: 24px 32px;
        }

        .stat-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .stat-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .quiz-container {
            padding: 0 32px 32px;
        }

        .question-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .question-card.fade-in {
            opacity: 1;
        }

        .question-card:hover {
            box-shadow: var(--shadow-lg);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }

        .question-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .question-number {
            font-size: 13px;
            font-weight: 600;
            color: var(--primary);
            background: var(--primary-light);
            padding: 6px 12px;
            border-radius: 16px;
        }

        .question-category {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
            background: var(--glass);
            padding: 6px 12px;
            border-radius: 16px;
        }

        .question-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: var(--glass);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-secondary);
        }

        .action-btn:hover {
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary-light);
        }

        .question-text {
            font-size: 18px;
            font-weight: 500;
            line-height: 1.6;
            margin-bottom: 24px;
            color: var(--text-primary);
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 12px;
            margin-bottom: 24px;
        }

        .option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            background: var(--glass);
            min-height: 60px;
        }

        .option:hover {
            border-color: var(--primary-light);
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }

        .option.selected {
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .option.correct {
            border-color: var(--success);
            background: rgba(34, 197, 94, 0.05);
        }

        .option.incorrect {
            border-color: var(--error);
            background: rgba(239, 68, 68, 0.05);
        }

        .option-letter {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--surface);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            color: var(--text-secondary);
            flex-shrink: 0;
            transition: var(--transition);
        }

        .option.selected .option-letter {
            background: var(--primary);
            color: white;
        }

        .option.correct .option-letter {
            background: var(--success);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--error);
            color: white;
        }

        .option-text {
            flex: 1;
            font-size: 15px;
            font-weight: 400;
            color: var(--text-primary);
        }

        .explanation-section {
            margin-top: 24px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 24px;
        }

        .explanation-section details {
            margin-bottom: 16px;
        }

        .explanation-section summary {
            padding: 12px 16px;
            background: var(--surface);
            cursor: pointer;
            font-weight: 500;
            font-size: 15px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
            color: var(--text-primary);
        }

        .explanation-section summary:hover {
            background: var(--primary-light);
        }

        .explanation-section details[open] summary {
            background: var(--primary);
            color: white;
        }

        .explanation-content {
            padding: 16px;
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .explanation-content strong {
            color: var(--text-primary);
        }

        .correct-answer, .why-not-section, .related-questions {
            margin-bottom: 16px;
            padding: 16px;
            border-radius: var(--radius);
        }

        .correct-answer {
            background: rgba(34, 197, 94, 0.05);
            border-left: 4px solid var(--success);
        }

        .why-not-section {
            background: rgba(239, 68, 68, 0.05);
            border-left: 4px solid var(--error);
        }

        .related-questions {
            background: rgba(59, 130, 246, 0.05);
            border-left: 4px solid var(--primary);
        }

        .related-questions-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .related-question-tag {
            padding: 6px 12px;
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary);
            border-radius: 16px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .related-question-tag:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: translateY(-1px);
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }

        .quiz-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .quiz-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .quiz-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .check-btn {
            background: var(--primary);
            color: white;
        }

        .check-btn:hover:not(:disabled) {
            background: var(--primary-dark);
        }

        .next-btn {
            background: var(--success);
            color: white;
        }

        .next-btn:hover:not(:disabled) {
            background: #16a34a;
        }

        .submit-btn {
            background: var(--gradient);
            color: white;
            padding: 12px 32px;
            font-size: 16px;
        }

        .results-screen {
            padding: 32px;
            max-width: 900px;
            margin: 0 auto;
        }

        .results-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 48px;
            box-shadow: var(--shadow-lg);
            text-align: center;
        }

        .results-header {
            margin-bottom: 32px;
        }

        .results-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .score-display {
            font-size: 64px;
            font-weight: 700;
            margin: 32px 0;
            color: var(--text-primary);
        }

        .score-text {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 32px;
        }

        .results-details {
            text-align: left;
            margin: 48px 0;
            background: var(--glass);
            border-radius: var(--radius);
            padding: 24px;
            border: 1px solid var(--glass-border);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid var(--border);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-question {
            flex: 1;
            font-size: 14px;
            color: var(--text-primary);
        }

        .result-status {
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
        }

        .result-correct {
            background: rgba(34, 197, 94, 0.1);
            color: var(--success);
        }

        .result-incorrect {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }

        .restart-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 16px 48px;
            border-radius: var(--radius);
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 999;
            display: none;
            transition: opacity 0.3s ease;
        }

        .overlay.active {
            display: block;
            opacity: 1;
        }

        .search-container {
            padding: 16px 32px;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
        }

        .search-box {
            display: flex;
            align-items: center;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 12px 16px;
            max-width: 400px;
            margin: 0 auto;
        }

        .search-box input {
            flex: 1;
            border: none;
            background: transparent;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
        }

        .search-box i {
            color: var(--text-tertiary);
            margin-right: 8px;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100vw;
            }

            .main-content.sidebar-open {
                margin-left: 100vw;
            }

            .top-nav {
                padding: 12px 16px;
                flex-wrap: wrap;
                gap: 12px;
            }

            .nav-left {
                width: 100%;
                justify-content: space-between;
            }

            .nav-right {
                width: 100%;
                justify-content: space-between;
            }

            .stats-grid {
                grid-template-columns: 1fr;
                padding: 16px;
            }

            .quiz-container {
                padding: 0 16px 16px;
            }

            .question-card {
                padding: 24px;
            }

            .question-text {
                font-size: 17px;
            }

            .option {
                padding: 12px;
                min-height: 70px;
            }

            .results-card {
                padding: 32px 24px;
            }

            .score-display {
                font-size: 48px;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .search-container {
                padding: 12px 16px;
            }

            .quiz-btn {
                padding: 16px 20px;
                font-size: 16px;
            }
        }

        @media (min-width: 1200px) {
            .quiz-container {
                max-width: 1100px;
                margin: 0 auto;
                padding: 24px;
            }

            .question-card {
                max-width: 1000px;
                margin: 0 auto 24px;
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 1.5s infinite;
        }

        .hidden {
            display: none;
        }

        .glass {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow);
        }

        .text-gradient {
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .question-difficulty {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            color: white;
        }

        .question-dropdown {
            margin-top: 8px;
            display: block;
        }

        .question-dropdown select {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--surface);
            color: var(--text-primary);
            font-size: 13px;
            cursor: pointer;
        }

        .option.disabled {
            pointer-events: none;
            opacity: 0.6;
            cursor: not-allowed;
        }

        .timer-warning {
            color: var(--warning);
        }

        .timer-error {
            color: var(--error);
        }

        .loading-spinner {
            display: none;
            border: 2px solid var(--border);
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }

        .loading-spinner.active {
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .glass-effect {
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .dark-mode .glass-effect {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-item:hover {
            background: linear-gradient(135deg, var(--primary-light) 0%, rgba(59, 130, 246, 0.15) 100%) !important;
            border-left-color: var(--primary) !important;
            transform: translateX(8px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.25) !important;
            backdrop-filter: blur(10px);
        }

        .category-card:hover {
            background: linear-gradient(135deg, var(--glass) 0%, rgba(255, 255, 255, 0.95) 100%) !important;
            transform: translateY(-5px) scale(1.03) !important;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15), 0 0 30px rgba(59, 130, 246, 0.1) !important;
            border-color: var(--primary) !important;
            backdrop-filter: blur(10px);
        }

        .option:hover {
            background: linear-gradient(135deg, var(--primary-light) 0%, rgba(59, 130, 246, 0.12) 100%) !important;
            transform: translateY(-3px) scale(1.03) !important;
            box-shadow: 0 12px 30px rgba(59, 130, 246, 0.2) !important;
            border-color: var(--primary) !important;
        }

        .quiz-btn:hover:not(:disabled) {
            transform: translateY(-3px) scale(1.08) !important;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25) !important;
            filter: brightness(1.1);
        }

        .action-btn:hover {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%) !important;
            color: white !important;
            transform: scale(1.15) rotate(8deg) !important;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.5) !important;
        }

        .modern-dropdown {
            position: relative;
            margin-top: 12px;
        }

        .modern-dropdown select {
            width: 100%;
            padding: 12px 48px 12px 16px;
            border: 2px solid transparent;
            border-radius: 16px;
            background: linear-gradient(135deg, var(--surface) 0%, var(--glass) 100%);
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 18px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(10px);
        }

        .modern-dropdown select:hover {
            border-color: var(--primary);
            background: linear-gradient(135deg, var(--primary-light) 0%, rgba(59, 130, 246, 0.08) 100%);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.2);
            transform: translateY(-2px);
        }

        .modern-dropdown select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15), 0 8px 25px rgba(59, 130, 246, 0.25);
            transform: translateY(-2px);
        }

        .dark-mode .modern-dropdown select {
            background: linear-gradient(135deg, var(--surface) 0%, var(--glass) 100%);
            color: var(--text-primary);
        }

        .search-container {
            transition: all 0.4s ease;
        }

        .search-box {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .search-box:focus-within {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(59, 130, 246, 0.2);
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.15);
        }

        .search-blur-active .main-content > *:not(.search-container):not(.quiz-container) {
            filter: blur(8px);
            opacity: 0.7;
            pointer-events: none;
        }

        .stat-card {
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s ease;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.05) !important;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2) !important;
        }

        .progress-fill {
            transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark), #8b5cf6) !important;
            box-shadow: 0 2px 12px rgba(59, 130, 246, 0.4);
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .notification {
            border-radius: 20px !important;
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            font-weight: 600;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.15)) !important;
        }

        .dark-mode .notification {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.2)) !important;
        }

        .question-card {
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .question-card:hover {
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15) !important;
            transform: translateY(-3px);
            border-color: var(--primary-light);
        }

        .dark-mode .nav-item:hover {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.25) 0%, rgba(59, 130, 246, 0.1) 100%) !important;
        }

        .dark-mode .category-card:hover {
            background: linear-gradient(135deg, var(--glass) 0%, rgba(17, 24, 39, 0.95) 100%) !important;
        }

        .dark-mode .option:hover {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(59, 130, 246, 0.08) 100%) !important;
        }

        .search-highlight {
            background: linear-gradient(120deg, var(--primary-light) 0%, transparent 50%);
            border-radius: 4px;
            padding: 2px 4px;
        }
    </style>
</head>
<body>
    <div class="overlay" id="overlay"></div>
    
    <div class="app-container">
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-stethoscope"></i>
                    <span>MediQuiz Pro</span>
                </div>
                <div class="sidebar-subtitle">Advanced Medical Education Platform</div>
            </div>
            
            <div class="user-profile">
                <div class="user-avatar">JD</div>
                <div class="user-info">
                    <h3>Dr. John Doe</h3>
                    <p>Medical Student</p>
                </div>
            </div>
            
            <div class="nav-item active" data-page="dashboard">
                <div class="nav-icon">
                    <i class="fas fa-home"></i>
                </div>
                <span>Dashboard</span>
            </div>
            <div class="nav-item" data-page="courses">
                <div class="nav-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <span>My Courses</span>
            </div>
            <div class="nav-item" data-page="bookmarks">
                <div class="nav-icon">
                    <i class="fas fa-bookmark"></i>
                </div>
                <span>Bookmarked Questions</span>
            </div>
            <div class="nav-item" data-page="settings">
                <div class="nav-icon">
                    <i class="fas fa-cog"></i>
                </div>
                <span>Settings</span>
            </div>
            
            <div class="categories-section">
                <div class="section-title">
                    <span>Medical Categories</span>
                    <i class="fas fa-sliders-h"></i>
                </div>
                <div class="categories-grid" id="categoriesGrid"></div>
            </div>
        </div>
        
        <div class="main-content" id="mainContent">
            <div class="top-nav">
                <div class="nav-left">
                    <button class="menu-toggle" id="menuToggle" aria-label="Toggle Sidebar">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title" id="pageTitle">Medical Quiz Dashboard</h1>
                </div>
                <div class="nav-right">
                    <div class="mode-selector">
                        <button class="mode-btn active" data-mode="exam" aria-label="Exam Mode">
                            <i class="fas fa-file-alt"></i>
                            Exam
                        </button>
                        <button class="mode-btn" data-mode="quiz" aria-label="Quiz Mode">
                            <i class="fas fa-tasks"></i>
                            Quiz
                        </button>
                    </div>
                    <div class="action-btn" id="themeToggle" aria-label="Toggle Theme">
                        <i class="fas fa-sun"></i>
                    </div>
                    <div class="action-btn" aria-label="Notifications">
                        <i class="fas fa-bell"></i>
                    </div>
                </div>
            </div>
            
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Search questions or categories...">
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card fade-in">
                    <div class="stat-header">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-up" style="color: var(--success);"></i>
                            <span style="color: var(--success); font-size: 13px;">+12%</span>
                        </div>
                    </div>
                    <div class="stat-value" id="correctAnswers">0</div>
                    <div class="stat-label">Correct Answers</div>
                </div>
            </div>
            
            <div class="quiz-container" id="quizContainer"></div>
            <div class="results-screen hidden" id="resultsScreen"></div>
        </div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
  const tg = window.Telegram.WebApp;

  // Show Telegram's native back button
  tg.BackButton.show();

  // Handle Telegram back button press
  tg.BackButton.onClick(() => {
    // Example: navigate back
    window.history.back();
  });
</script>

    <script>
        // Sample quiz data
        const quizData = [
    {
        "id": 1,
        "question": "General properties of negative feedback include all of the following EXCEPT:",
        "options": [
            "It controls deviation from normal value",
            "It is the most commonly occurring",
            "It is a closed loop control system in which the output accelerates the control system",
            "The term negative is used because the effector response opposes the departure from the set point",
            "It often works towards homeostasis"
        ],
        "answer": 2,
        "correctAnswer": "It is a closed loop control system in which the output accelerates the control system",
        "explanation": "Negative feedback maintains stability by opposing deviations from the set point, not accelerating them, as described in option C, which characterizes positive feedback. In Guyton and Hall Textbook of Medical Physiology, 13th edition, Chapter 1, pages 5-6, negative feedback is the primary homeostatic mechanism, correcting deviations (A, D, E) and is the most common control system (B).",
        "whyNotOtherOptions": {
            "a": "Negative feedback corrects deviations, e.g., temperature regulation.",
            "b": "It is the most common control system in physiology.",
            "d": "Effector opposes deviation, defining negative feedback.",
            "e": "Negative feedback promotes homeostasis, e.g., blood glucose control."
        },
        "relatedQuestions": ["7 (facilitated diffusion)", "16 (action potential)", "80 (positive feedback)"],
        "category": "General Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 2,
        "question": "Which of the following is not the function of smooth endoplasmic reticulum?",
        "options": [
            "Protein synthesis",
            "Calcium storage in muscle cells",
            "Glycogen storage in liver cells",
            "Drug metabolism in hepatocytes",
            "Lipid synthesis"
        ],
        "answer": 0,
        "correctAnswer": "Protein synthesis",
        "explanation": "Smooth endoplasmic reticulum (SER) functions in lipid synthesis, drug detoxification, glycogen breakdown, and calcium storage (sarcoplasmic reticulum). Protein synthesis occurs in the rough endoplasmic reticulum (RER) due to ribosomes. In Guyton and Hall, 13th edition, Chapter 2, pages 17-18, SER roles exclude protein synthesis, which is RER-specific.",
        "whyNotOtherOptions": {
            "b": "SER stores calcium in muscle (sarcoplasmic reticulum).",
            "c": "SER aids glycogen breakdown in liver cells.",
            "d": "SER detoxifies drugs in hepatocytes.",
            "e": "SER synthesizes lipids, e.g., steroids."
        },
        "relatedQuestions": ["3 (cell membrane)", "5 (cell membrane structure)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 3,
        "question": "The cell membrane is composed of:",
        "options": [
            "45% proteins and 55% carbohydrates",
            "55% proteins and 43% lipids",
            "55% lipids and 13% cholesterol",
            "45% proteins and 3% carbohydrates",
            "45% phospholipids and 13% neutral fats"
        ],
        "answer": 3,
        "correctAnswer": "45% proteins and 3% carbohydrates",
        "explanation": "The plasma membrane is ~40-50% proteins, ~40-50% lipids (phospholipids, cholesterol), and ~2-10% carbohydrates. Option D is closest, as carbohydrates are minor (glycoproteins/glycolipids). In Guyton and Hall, 13th edition, Chapter 2, page 13, the membrane is ~45% lipids, ~45% proteins, ~3-5% carbohydrates in some contexts.",
        "whyNotOtherOptions": {
            "a": "Carbohydrates are not 55%; they are a minor component.",
            "b": "Proteins are not 55%; lipids are higher than 43%.",
            "c": "Cholesterol is ~13% of lipids, not total membrane.",
            "e": "Neutral fats are minimal, not 13%."
        },
        "relatedQuestions": ["2 (SER)", "5 (cell membrane structure)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 4,
        "question": "Which one of the following does not belong to the cell membrane proteins?",
        "options": [
            "Ion channels",
            "Na+ K+ ATPase",
            "Carrier proteins",
            "Membrane receptor",
            "None of the above"
        ],
        "answer": 4,
        "correctAnswer": "None of the above",
        "explanation": "Ion channels, Na+/K+ ATPase, carrier proteins, and receptors are all membrane proteins. In Guyton and Hall, 13th edition, Chapter 2, pages 13-15, membrane proteins include channels, pumps, carriers, and receptors, so none are excluded.",
        "whyNotOtherOptions": {
            "a": "Ion channels are integral membrane proteins.",
            "b": "Na+/K+ ATPase is a membrane pump.",
            "c": "Carrier proteins facilitate transport.",
            "d": "Membrane receptors bind ligands."
        },
        "relatedQuestions": ["5 (cell membrane structure)", "6 (Na+/K+ ATPase)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 5,
        "question": "Which of the following statements is correct about the structure of cell membrane?",
        "options": [
            "Portions of the lipid bilayer that face the ECF and ICF are hydrophobic",
            "Polar molecules can easily pass through the lipid bilayer",
            "Protein channels within the lipid bilayer allow the passage of ions",
            "The polar heads of the lipid bilayer face each other in the interior of the cell",
            "None of the above"
        ],
        "answer": 2,
        "correctAnswer": "Protein channels within the lipid bilayer allow the passage of ions",
        "explanation": "The lipid bilayer has hydrophilic heads facing ECF/ICF and hydrophobic tails inward. Protein channels enable ion passage. In Guyton and Hall, 13th edition, Chapter 2, pages 13-14, the fluid mosaic model describes polar heads outward, tails inward, with channels for ions. A, B, and D are incorrect.",
        "whyNotOtherOptions": {
            "a": "Hydrophilic heads face ECF/ICF; tails are hydrophobic.",
            "b": "Polar molecules require channels/carriers, not free diffusion.",
            "d": "Polar heads face outward, not inward.",
            "e": "Option C is correct, so E is invalid."
        },
        "relatedQuestions": ["3 (cell membrane)", "4 (membrane proteins)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 6,
        "question": "Which of the following is true about the Na+K+ ATPase?",
        "options": [
            "It is made up of five sub units",
            "Its alpha sub unit is facing the ECF and has binding site for Na+ ions",
            "Its ICF domain contains four binding sites",
            "The ICF domain has K+ ion binding sites",
            "ATPase binding site is on its ECF domain"
        ],
        "answer": 2,
        "correctAnswer": "None of the above",
        "explanation": "Na+/K+ ATPase has two main subunits (alpha, beta), binds 3 Na+ intracellularly and 2 K+ extracellularly, with ATP binding on the ICF side. None of the options are fully correct: A (five subunits wrong), B (Na+ binds ICF), C (three Na+ sites), D (K+ binds ECF), E (ATP binds ICF). In Guyton and Hall, 13th edition, Chapter 4, pages 49-50, the pump’s structure and binding sites are detailed. Note: Original answer D was incorrect; no option fully aligns.",
        "whyNotOtherOptions": {
            "a": "It has alpha and beta subunits, not five.",
            "b": "Na+ binds on the ICF side of alpha subunit.",
            "c": "ICF domain binds three Na+, not four.",
            "d": "K+ binds on ECF side after conformation change.",
            "e": "ATP binding site is on the ICF side."
        },
        "relatedQuestions": ["4 (membrane proteins)", "13 (antiport)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 7,
        "question": "Which one of the following is false about facilitated diffusion?",
        "options": [
            "It requires carrier proteins to transport substances",
            "It needs ATP to transports substances",
            "It transports substances down their concentration gradient",
            "Carrier proteins are involved",
            "It is a saturable process"
        ],
        "answer": 1,
        "correctAnswer": "It needs ATP to transports substances",
        "explanation": "Facilitated diffusion is passive, using carrier proteins to transport substances down their gradient without ATP, and is saturable. Option B is false. In Guyton and Hall, 13th edition, Chapter 4, pages 46-47, facilitated diffusion (e.g., glucose) is described as passive and saturable.",
        "whyNotOtherOptions": {
            "a": "Carrier proteins are required, e.g., GLUT transporters.",
            "c": "It follows the concentration gradient, passive transport.",
            "d": "Carrier proteins mediate facilitated diffusion.",
            "e": "It saturates due to limited carrier availability."
        },
        "relatedQuestions": ["1 (negative feedback)", "10 (secondary active transport)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 8,
        "question": "A mechanism by which water molecules are transported through the cell membrane is",
        "options": [
            "Osmosis",
            "Simple diffusion",
            "Facilitated diffusion",
            "Primary active transport",
            "Secondary active transport"
        ],
        "answer": 0,
        "correctAnswer": "Osmosis",
        "explanation": "Water moves across membranes by osmosis, primarily via aquaporins, driven by osmotic gradients. In Guyton and Hall, 13th edition, Chapter 4, pages 45-46, osmosis is defined as water movement across semipermeable membranes.",
        "whyNotOtherOptions": {
            "b": "Simple diffusion is for nonpolar molecules, not primary for water.",
            "c": "Facilitated diffusion is for solutes like glucose, not water.",
            "d": "Primary active transport uses ATP, not for water.",
            "e": "Secondary active transport is for solutes, not water."
        },
        "relatedQuestions": ["7 (facilitated diffusion)", "9 (lipid-soluble substances)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 9,
        "question": "Which of the following substances is lipid-soluble?",
        "options": [
            "O2 and CO2",
            "Water",
            "Sodium and Potassium",
            "Glucose",
            "All"
        ],
        "answer": 0,
        "correctAnswer": "O2 and CO2",
        "explanation": "O2 and CO2 are nonpolar, lipid-soluble, and diffuse through the bilayer. Water, Na+, K+, and glucose require channels or carriers. In Guyton and Hall, 13th edition, Chapter 4, page 45, nonpolar molecules like O2/CO2 are noted for easy diffusion.",
        "whyNotOtherOptions": {
            "b": "Water is polar, moves via osmosis/aquaporins.",
            "c": "Na+ and K+ are ions, require channels.",
            "d": "Glucose is polar, uses facilitated diffusion.",
            "e": "Not all are lipid-soluble; only A is correct."
        },
        "relatedQuestions": ["5 (cell membrane structure)", "8 (osmosis)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 10,
        "question": "Glucose and amino acids are absorbed from the GIT and reabsorbed from the renal tubules by:",
        "options": [
            "Simple diffusion",
            "Osmosis",
            "Secondary active transport",
            "Primary active transport",
            "None of the above"
        ],
        "answer": 2,
        "correctAnswer": "Secondary active transport",
        "explanation": "Glucose and amino acids are absorbed/reabsorbed via Na+-coupled secondary active transport, driven by the Na+ gradient. In Guyton and Hall, 13th edition, Chapter 65, pages 822-823, and Chapter 27, page 341, Na+-glucose/amino acid cotransporters are described.",
        "whyNotOtherOptions": {
            "a": "Simple diffusion is for nonpolar molecules, not glucose.",
            "b": "Osmosis is for water, not solutes.",
            "d": "Primary active transport is for pumps like Na+/K+ ATPase.",
            "e": "Option C is correct, so E is invalid."
        },
        "relatedQuestions": ["7 (facilitated diffusion)", "52 (proximal tubules)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 11,
        "question": "Which one of the following is correct about total body water volume?",
        "options": [
            "Higher in females than in males",
            "Higher in adults than in infants",
            "Higher in obese people than in leans",
            "Higher in males than in females in adults",
            "Higher in olds than in adults"
        ],
        "answer": 3,
        "correctAnswer": "Higher in males than in females in adults",
        "explanation": "Total body water is ~60% in adult males, ~50% in females (due to higher fat), higher in infants (~70-80%), lower in obese, and lower in elderly. In Guyton and Hall, 13th edition, Chapter 25, pages 298-299, male-female differences are noted.",
        "whyNotOtherOptions": {
            "a": "Females have lower water due to higher fat content.",
            "b": "Infants have higher water than adults.",
            "c": "Obese have lower water due to fat.",
            "e": "Elderly have lower water than adults."
        },
        "relatedQuestions": ["12 (electrolytes)", "82 (fluid balance)"],
        "category": "General Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 12,
        "question": "Which electrolytes of the following are present at a higher concentration in the ECF than in the ICF?",
        "options": [
            "Na+, K+, Cl- and HCO3-",
            "K+, Cl-, SO42- and HCO3-",
            "Na+, Cl-, HCO3- and Ca2+",
            "K+, SO42-, Mg2+ and PO43-",
            "Ca2+, K+ and Na+"
        ],
        "answer": 2,
        "correctAnswer": "Na+, Cl-, HCO3- and Ca2+",
        "explanation": "ECF has higher Na+ (142 mEq/L), Cl- (103 mEq/L), HCO3- (28 mEq/L), and Ca2+ (2.4 mEq/L) than ICF, where K+, Mg2+, PO43-, and proteins dominate. In Guyton and Hall, 13th edition, Chapter 25, page 300, Table 25-1 lists these distributions.",
        "whyNotOtherOptions": {
            "a": "K+ is higher in ICF, not ECF.",
            "b": "K+ and SO42- are higher in ICF.",
            "d": "K+, Mg2+, PO43- are ICF-dominant.",
            "e": "K+ is higher in ICF, not ECF."
        },
        "relatedQuestions": ["11 (body water)", "82 (fluid balance)"],
        "category": "General Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 13,
        "question": "Which one of the following represents antiport carrier?",
        "options": [
            "Transport of glucose by facilitated diffusion",
            "Na+-K+ pump",
            "Na-glucose co-transporter",
            "Transport of O2 and CO2",
            "Osmosis"
        ],
        "answer": 1,
        "correctAnswer": "Na+-K+ pump",
        "explanation": "Antiport involves opposite-direction transport, like the Na+/K+ pump (3 Na+ out, 2 K+ in). Na-glucose is symport; glucose is facilitated diffusion; O2/CO2 is simple diffusion; osmosis is water movement. In Guyton and Hall, 13th edition, Chapter 4, page 49, the pump is an antiport.",
        "whyNotOtherOptions": {
            "a": "Glucose facilitated diffusion is not antiport.",
            "c": "Na-glucose cotransporter is symport.",
            "d": "O2/CO2 diffuse freely, not via antiport.",
            "e": "Osmosis is water movement, not antiport."
        },
        "relatedQuestions": ["6 (Na+/K+ ATPase)", "10 (secondary transport)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 14,
        "question": "Bipolar neurons are located in the",
        "options": [
            "Anterior horn of the gray matter of spinal cord",
            "Retina and inner ear",
            "Lateral horn of the gray matter of the spinal cord",
            "Posterior horn of the gray matter of spinal cord",
            "Peripheral effector organs"
        ],
        "answer": 1,
        "correctAnswer": "Retina and inner ear",
        "explanation": "Bipolar neurons, with two processes, are sensory and found in the retina (bipolar cells) and inner ear (vestibular/cochlear ganglia). Other regions contain motor or other neuron types. In Guyton and Hall, 13th edition, Chapter 45, page 557, bipolar neurons are noted in special senses.",
        "whyNotOtherOptions": {
            "a": "Anterior horn has motor neurons.",
            "c": "Lateral horn has autonomic neurons.",
            "d": "Posterior horn has sensory interneurons.",
            "e": "Effector organs are not neuron locations."
        },
        "relatedQuestions": ["15 (neuroglia)", "47 (neural crest)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 15,
        "question": "Identify the correct statement from the following:",
        "options": [
            "Motor neurons transmit impulses from periphery to the CNS",
            "Microglia provides nutrients to neurons in the CNS",
            "Neuroglia are excitable cells",
            "Nerve insulators for both central and peripheral NS are the same",
            "None of the above"
        ],
        "answer": 4,
        "correctAnswer": "None of the above",
        "explanation": "All options are incorrect: motor neurons transmit from CNS to periphery, microglia are phagocytic, neurons are excitable (not glia), and CNS (oligodendrocytes) and PNS (Schwann cells) have different insulators. In Guyton and Hall, 13th edition, Chapter 45, pages 554-556, these are clarified.",
        "whyNotOtherOptions": {
            "a": "Motor neurons transmit from CNS to muscles.",
            "b": "Astrocytes, not microglia, provide nutrients.",
            "c": "Neurons, not neuroglia, are excitable.",
            "d": "CNS uses oligodendrocytes; PNS uses Schwann cells."
        },
        "relatedQuestions": ["14 (bipolar neurons)", "19 (Schwann cells)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 16,
        "question": "During the depolarization phase of action potential",
        "options": [
            "Voltage gated Na channels are opened",
            "Voltage gated K channels opened",
            "Voltage gated Na channels are closed",
            "Ligand gated K channels are closed",
            "None of the above"
        ],
        "answer": 0,
        "correctAnswer": "Voltage gated Na channels are opened",
        "explanation": "Depolarization occurs when voltage-gated Na+ channels open, allowing Na+ influx. K+ channels open later (repolarization). In Guyton and Hall, 13th edition, Chapter 5, pages 59-60, depolarization is driven by Na+ channel activation.",
        "whyNotOtherOptions": {
            "b": "K+ channels open during repolarization.",
            "c": "Na+ channels open, not close, during depolarization.",
            "d": "Ligand-gated K+ channels are not primary in action potentials.",
            "e": "Option A is correct, so E is invalid."
        },
        "relatedQuestions": ["17 (action potential)", "21 (NMJ)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 17,
        "question": "Which one of the following is wrong about action potential of the nerve fiber?",
        "options": [
            "It is caused by a transient membrane depolarization",
            "It needs a threshold stimulus to be generated",
            "It has a definite RMP",
            "It is all or none in its nature",
            "None of the above"
        ],
        "answer": 4,
        "correctAnswer": "None of the above",
        "explanation": "All statements are correct: action potentials involve depolarization, require threshold, start from resting membrane potential (RMP), and are all-or-none. In Guyton and Hall, 13th edition, Chapter 5, pages 58-61, these are detailed.",
        "whyNotOtherOptions": {
            "a": "Depolarization causes the action potential.",
            "b": "Threshold stimulus is required.",
            "c": "RMP is the baseline potential.",
            "d": "Action potentials are all-or-none."
        },
        "relatedQuestions": ["16 (depolarization)", "18 (nerve conduction)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 18,
        "question": "Fast rate conduction of nerve impulse is achieved in:",
        "options": [
            "Type A nerve fibers",
            "Type B nerve fibers",
            "Type C nerve fibers",
            "Autonomic nerve fibers",
            "Unmyelinated somatic nerve fibers"
        ],
        "answer": 0,
        "correctAnswer": "Type A nerve fibers",
        "explanation": "Type A fibers (large, myelinated) have the fastest conduction (up to 120 m/s). Type B and C are slower; autonomic fibers vary. In Guyton and Hall, 13th edition, Chapter 57, page 691, Type A is noted for rapid conduction.",
        "whyNotOtherOptions": {
            "b": "Type B fibers are slower (myelinated, autonomic).",
            "c": "Type C fibers are unmyelinated, slowest.",
            "d": "Autonomic fibers include slower B/C types.",
            "e": "Unmyelinated somatic fibers are slow (Type C)."
        },
        "relatedQuestions": ["17 (action potential)", "19 (Schwann cells)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 19,
        "question": "In the peripheral nerve fibers, myelin sheath is produced by",
        "options": [
            "Schwann cells",
            "Oligodendrocytes",
            "Microglial cells",
            "Ependymal cells",
            "Astrocytes"
        ],
        "answer": 0,
        "correctAnswer": "Schwann cells",
        "explanation": "Schwann cells myelinate PNS axons; oligodendrocytes myelinate CNS. In Guyton and Hall, 13th edition, Chapter 45, page 555, Schwann cells are PNS myelin producers.",
        "whyNotOtherOptions": {
            "b": "Oligodendrocytes myelinate CNS axons.",
            "c": "Microglia are phagocytic, not myelinating.",
            "d": "Ependymal cells line ventricles, not myelinating.",
            "e": "Astrocytes support neurons, not myelinate."
        },
        "relatedQuestions": ["15 (neuroglia)", "18 (nerve conduction)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 20,
        "question": "Which one of the following is wrong about the neuromuscular junction of the skeletal muscle?",
        "options": [
            "The neurotransmitter is always acetylcholine",
            "The post-synaptic receptor is always nicotinic receptor",
            "Excitatory post-synaptic potential is always produced",
            "EPSP causes contraction",
            "All are correct"
        ],
        "answer": 3,
        "correctAnswer": "EPSP causes contraction",
        "explanation": "At the skeletal NMJ, acetylcholine binds nicotinic receptors, producing an end-plate potential (EPP). The EPP triggers a muscle action potential, leading to contraction via excitation-contraction coupling, not directly causing contraction. In Guyton and Hall, 13th edition, Chapter 7, pages 83-86, EPP initiates action potential, not contraction directly. Note: Original answer E was incorrect; D is imprecise.",
        "whyNotOtherOptions": {
            "a": "Acetylcholine is the NMJ neurotransmitter.",
            "b": "Nicotinic receptors are always postsynaptic.",
            "c": "EPP is an excitatory postsynaptic potential.",
            "e": "D is incorrect, so E is invalid."
        },
        "relatedQuestions": ["21 (NMJ channels)", "22 (NMJ drugs)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 21,
        "question": "An action potential arriving at the neuromuscular junction causes opening of:",
        "options": [
            "Cl- channels",
            "Na+ channels",
            "Ca2+ channels",
            "K+ channels",
            "H+ channels"
        ],
        "answer": 2,
        "correctAnswer": "Ca2+ channels",
        "explanation": "Action potential at the NMJ opens voltage-gated Ca2+ channels in the presynaptic terminal, triggering ACh release. In Guyton and Hall, 13th edition, Chapter 7, page 83, Ca2+ influx initiates vesicle release.",
        "whyNotOtherOptions": {
            "a": "Cl- channels are not primary at NMJ.",
            "b": "Na+ channels open postsynaptically via nicotinic receptors.",
            "d": "K+ channels are not primary for release.",
            "e": "H+ channels are not involved."
        },
        "relatedQuestions": ["20 (NMJ)", "22 (NMJ drugs)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 22,
        "question": "A drug that blocks the neuromuscular junction of the skeletal muscle is",
        "options": [
            "Neostigmine",
            "Carbachol",
            "Physostigmine",
            "D-tubocurarine",
            "Acetylcholine"
        ],
        "answer": 3,
        "correctAnswer": "D-tubocurarine",
        "explanation": "D-tubocurarine blocks nicotinic receptors at the NMJ, causing paralysis. Neostigmine/physostigmine enhance ACh; carbachol is an agonist; ACh is the neurotransmitter. In Guyton and Hall, 13th edition, Chapter 7, page 86, curare is a blocker.",
        "whyNotOtherOptions": {
            "a": "Neostigmine inhibits cholinesterase, enhancing ACh.",
            "b": "Carbachol mimics ACh.",
            "c": "Physostigmine enhances ACh action.",
            "e": "ACh is the neurotransmitter, not a blocker."
        },
        "relatedQuestions": ["20 (NMJ)", "21 (NMJ channels)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 23,
        "question": "Which of the following is not involved in the homeostasis of glucose?",
        "options": [
            "Liver",
            "Kidneys",
            "Brain",
            "Pancreas",
            "Lung"
        ],
        "answer": 4,
        "correctAnswer": "Lung",
        "explanation": "Liver (glycogen, gluconeogenesis), kidneys (reabsorption, gluconeogenesis), brain (glucose consumer), and pancreas (insulin/glucagon) regulate glucose. Lungs have no direct role. In Guyton and Hall, 13th edition, Chapter 79, pages 977-978, these organs are key; lungs are not mentioned.",
        "whyNotOtherOptions": {
            "a": "Liver stores glycogen, performs gluconeogenesis.",
            "b": "Kidneys reabsorb glucose, produce glucose.",
            "c": "Brain consumes glucose, affects regulation.",
            "d": "Pancreas secretes insulin/glucagon."
        },
        "relatedQuestions": ["10 (glucose transport)", "52 (proximal tubules)"],
        "category": "Endocrine Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 24,
        "question": "The function of T-tubules in the skeletal muscle fibers is",
        "options": [
            "Storage of Calcium ion",
            "Conduction of depolarization waves to the sarcoplasmic reticulum",
            "Contain post synaptic receptors",
            "Storage of neurotransmitters",
            "None of the above"
        ],
        "answer": 1,
        "correctAnswer": "Conduction of depolarization waves to the sarcoplasmic reticulum",
        "explanation": "T-tubules conduct action potentials to the sarcoplasmic reticulum, triggering Ca2+ release. In Guyton and Hall, 13th edition, Chapter 7, pages 87-88, T-tubules facilitate excitation-contraction coupling.",
        "whyNotOtherOptions": {
            "a": "Sarcoplasmic reticulum, not T-tubules, stores Ca2+.",
            "c": "Postsynaptic receptors are at the NMJ surface.",
            "d": "Neurotransmitters are stored presynaptically, not in T-tubules.",
            "e": "Option B is correct, so E is invalid."
        },
        "relatedQuestions": ["20 (NMJ)", "25 (muscle fibers)"],
        "category": "Muscle Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 25,
        "question": "One of the following is specific to that muscle fiber except:",
        "options": [
            "Depends on aerobic metabolism",
            "Contains large number of sarcomere",
            "Rich in capillary supply",
            "Has multiple nuclei",
            "Contains a lot of myoglobin"
        ],
        "answer": 1,
        "correctAnswer": "Contains large number of sarcomere",
        "explanation": "Slow oxidative (Type I) fibers are aerobic, capillary-rich, myoglobin-rich, and multinucleated. All skeletal fibers have many sarcomeres, so B is not specific. In Guyton and Hall, 13th edition, Chapter 6, pages 77-78, slow fibers are described; sarcomeres are universal.",
        "whyNotOtherOptions": {
            "a": "Type I fibers rely on aerobic metabolism.",
            "c": "Type I fibers have dense capillaries.",
            "d": "All skeletal fibers are multinucleated.",
            "e": "Type I fibers are rich in myoglobin."
        },
        "relatedQuestions": ["24 (T-tubules)", "26 (contractile proteins)"],
        "category": "Muscle Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 26,
        "question": "The principal contractile proteins in the skeletal muscle are:",
        "options": [
            "Actin and troponin",
            "Actin and myosin",
            "Troponin and tropomyosin",
            "Myosin and tropomyosin",
            "Actin and tropomyosin"
        ],
        "answer": 1,
        "correctAnswer": "Actin and myosin",
        "explanation": "Actin and myosin form cross-bridges for contraction. Troponin/tropomyosin are regulatory. In Guyton and Hall, 13th edition, Chapter 6, page 72, actin and myosin are the main contractile proteins.",
        "whyNotOtherOptions": {
            "a": "Troponin is regulatory, not contractile.",
            "c": "Troponin and tropomyosin are regulatory proteins.",
            "d": "Tropomyosin is regulatory, not contractile.",
            "e": "Tropomyosin is regulatory, not contractile."
        },
        "relatedQuestions": ["25 (muscle fibers)", "27 (sarcomere)"],
        "category": "Muscle Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 27,
        "question": "The contractile unit of the skeletal muscle is:",
        "options": [
            "The sarcomere",
            "The A-bands",
            "The I-bands",
            "The Z-lines",
            "The H-bands"
        ],
        "answer": 0,
        "correctAnswer": "The sarcomere",
        "explanation": "The sarcomere, from Z-line to Z-line, is the contractile unit of muscle. In Guyton and Hall, 13th edition, Chapter 6, page 71, the sarcomere is the functional unit.",
        "whyNotOtherOptions": {
            "b": "A-bands are part of sarcomeres, not the unit.",
            "c": "I-bands are part of sarcomeres, not the unit.",
            "d": "Z-lines define sarcomere boundaries.",
            "e": "H-bands are within sarcomeres, not the unit."
        },
        "relatedQuestions": ["25 (muscle fibers)", "26 (contractile proteins)"],
        "category": "Muscle Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 28,
        "question": "Which of the following statements is wrong about muscle tissue?",
        "options": [
            "Cardiac and skeletal muscles have striated appearance",
            "Cardiac and smooth muscles are involuntary",
            "Skeletal and cardiac muscles are innervated by the ANS",
            "Cardiac and smooth muscles are innervated by ANS"
        ],
        "answer": 2,
        "correctAnswer": "Skeletal and cardiac muscles are innervated by the ANS",
        "explanation": "Skeletal muscle is somatic (voluntary), not ANS-innervated. Cardiac and smooth muscles are involuntary and ANS-innervated; cardiac and skeletal are striated. In Guyton and Hall, 13th edition, Chapters 6, 8, 9, pages 70, 95, 105, these distinctions are clear.",
        "whyNotOtherOptions": {
            "a": "Cardiac and skeletal muscles are striated.",
            "b": "Cardiac and smooth muscles are involuntary.",
            "d": "Cardiac and smooth muscles are ANS-innervated."
        },
        "relatedQuestions": ["25 (muscle fibers)", "31 (sympathetic CV)"],
        "category": "Muscle Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 29,
        "question": "Which of the following events is energy independent?",
        "options": [
            "Release of Ca2+ from the sarcoplasmic reticulum",
            "Return of Ca2+ back to the sarcoplasmic reticulum",
            "The movement of myosin head to the center",
            "Detachment of myosin head from actin",
            "Final ionic rearrangement"
        ],
        "answer": 0,
        "correctAnswer": "Release of Ca2+ from the sarcoplasmic reticulum",
        "explanation": "Ca2+ release is passive via ryanodine receptors; reuptake, myosin movement, and detachment require ATP. Ionic rearrangement is unclear but likely energy-dependent. In Guyton and Hall, 13th edition, Chapter 7, page 88, Ca2+ release is energy-independent.",
        "whyNotOtherOptions": {
            "b": "Ca2+ reuptake uses Ca2+-ATPase, requiring ATP.",
            "c": "Myosin movement requires ATP.",
            "d": "Myosin detachment requires ATP binding.",
            "e": "Ionic rearrangement likely involves energy."
        },
        "relatedQuestions": ["24 (T-tubules)", "26 (contractile proteins)"],
        "category": "Muscle Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 30,
        "question": "Which of the following cranial nerve is stimulatory to the salivary glands?",
        "options": [
            "Oculomotor",
            "Facial",
            "Vagus",
            "Trigeminal",
            "Hypoglossal"
        ],
        "answer": 1,
        "correctAnswer": "Facial",
        "explanation": "The facial nerve (VII) stimulates submandibular/sublingual salivary glands via parasympathetic fibers. In Guyton and Hall, 13th edition, Chapter 64, page 809, facial nerve is primary for salivary secretion.",
        "whyNotOtherOptions": {
            "a": "Oculomotor (III) innervates eye muscles.",
            "c": "Vagus (X) affects GI, not salivary glands.",
            "d": "Trigeminal (V) is sensory/motor for face.",
            "e": "Hypoglossal (XII) controls tongue."
        },
        "relatedQuestions": ["38 (trigeminal)", "40 (hypoglossal)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 31,
        "question": "Which one of the following is not the effect of sympathetic stimulation on the cardiovascular system?",
        "options": [
            "Increased heart rate",
            "Increased force of contraction of the cardiac muscle",
            "Vasoconstriction of the systemic blood vessels",
            "Increases cardiac output",
            "None of the above"
        ],
        "answer": 4,
        "correctAnswer": "None of the above",
        "explanation": "Sympathetic stimulation increases heart rate, contractility, vasoconstriction (alpha), and cardiac output. All are effects. In Guyton and Hall, 13th edition, Chapter 9, pages 111-112, these are detailed.",
        "whyNotOtherOptions": {
            "a": "Increases heart rate (chronotropy).",
            "b": "Increases contractility (inotropy).",
            "c": "Causes vasoconstriction via alpha receptors.",
            "d": "Increases cardiac output via heart rate/contractility."
        },
        "relatedQuestions": ["32 (beta receptors)", "33 (dual innervation)"],
        "category": "Cardiovascular Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 32,
        "question": "The receptor that is found on the coronary arteries is",
        "options": [
            "Alpha 1",
            "Beta 1",
            "Alpha 2",
            "Beta 2"
        ],
        "answer": 3,
        "correctAnswer": "Beta 2",
        "explanation": "Coronary arteries have beta-2 receptors, mediating vasodilation. In Guyton and Hall, 13th edition, Chapter 21, page 248, beta-2 receptors cause coronary vasodilation.",
        "whyNotOtherOptions": {
            "a": "Alpha 1 causes vasoconstriction.",
            "b": "Beta 1 is primarily in the heart (rate/contractility).",
            "c": "Alpha 2 is not primary in coronary arteries."
        },
        "relatedQuestions": ["31 (sympathetic CV)", "48 (beta receptors)"],
        "category": "Cardiovascular Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 33,
        "question": "Of the following one does not receive dual autonomic innervation. Identify:",
        "options": [
            "The heart",
            "The blood vessels",
            "The liver",
            "The stomach",
            "Pancreas"
        ],
        "answer": 1,
        "correctAnswer": "The blood vessels",
        "explanation": "Blood vessels are primarily sympathetic-innervated (vasoconstriction); parasympathetic innervation is limited. Other organs receive dual innervation. In Guyton and Hall, 13th edition, Chapter 61, page 763, blood vessels are noted as predominantly sympathetic.",
        "whyNotOtherOptions": {
            "a": "Heart has sympathetic and parasympathetic innervation.",
            "c": "Liver has dual innervation for metabolic control.",
            "d": "Stomach has vagal and sympathetic innervation.",
            "e": "Pancreas has dual innervation for secretion."
        },
        "relatedQuestions": ["31 (sympathetic CV)", "34 (sweat glands)"],
        "category": "Autonomic Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 34,
        "question": "A neurotransmitter produced by a postganglionic sympathetic fiber to the sweat glands is",
        "options": [
            "Acetylcholine",
            "Adrenaline",
            "Noradrenaline",
            "Dopamine"
        ],
        "answer": 0,
        "correctAnswer": "Acetylcholine",
        "explanation": "Sweat gland sympathetic fibers are uniquely cholinergic, releasing acetylcholine. In Guyton and Hall, 13th edition, Chapter 61, page 761, this is noted.",
        "whyNotOtherOptions": {
            "b": "Adrenaline is adrenal medulla, not postganglionic.",
            "c": "Noradrenaline is typical for sympathetic fibers.",
            "d": "Dopamine is not primary in sympathetic fibers."
        },
        "relatedQuestions": ["33 (dual innervation)", "35 (ANS neurotransmitters)"],
        "category": "Autonomic Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 35,
        "question": "Which one of the following is wrong about neuronal activities of the ANS?",
        "options": [
            "All preganglionic fibers are cholinergic",
            "Postganglionic parasympathetic fibers are cholinergic",
            "Preganglionic parasympathetic fibers are cholinergic",
            "Most postganglionic sympathetic fibers are adrenergic",
            "None of the above"
        ],
        "answer": 4,
        "correctAnswer": "None of the above",
        "explanation": "All statements are correct: all preganglionic fibers, postganglionic parasympathetic, and most sympathetic postganglionic (except sweat glands) are as described. In Guyton and Hall, 13th edition, Chapter 61, pages 760-761, these are detailed.",
        "whyNotOtherOptions": {
            "a": "All preganglionic fibers are cholinergic.",
            "b": "Parasympathetic postganglionic are cholinergic.",
            "c": "Parasympathetic preganglionic are cholinergic.",
            "d": "Most sympathetic postganglionic are adrenergic."
        },
        "relatedQuestions": ["33 (dual innervation)", "34 (sweat glands)"],
        "category": "Autonomic Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 36,
        "question": "Which one of the following is acetylcholine drug?",
        "options": [
            "Propranolol",
            "Metoprolol",
            "Atropine",
            "Neostigmine",
            "Pilocarpine"
        ],
        "answer": 4,
        "correctAnswer": "Pilocarpine",
        "explanation": "Pilocarpine is a muscarinic cholinergic agonist. Propranolol/metoprolol are beta-blockers, atropine is a muscarinic antagonist, neostigmine inhibits cholinesterase. In Guyton and Hall, 13th edition, Chapter 61, page 766, pilocarpine is a muscarinic agonist.",
        "whyNotOtherOptions": {
            "a": "Propranolol is a beta-blocker.",
            "b": "Metoprolol is a beta-blocker.",
            "c": "Atropine blocks muscarinic receptors.",
            "d": "Neostigmine enhances ACh, not an agonist."
        },
        "relatedQuestions": ["34 (sweat glands)", "37 (sympathomimetic)"],
        "category": "Autonomic Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 37,
        "question": "Which of the following is not a sympathomimetic drug?",
        "options": [
            "Epinephrine",
            "Norepinephrine",
            "Methoxamine",
            "Pilocarpine"
        ],
        "answer": 3,
        "correctAnswer": "Pilocarpine",
        "explanation": "Pilocarpine is parasympathomimetic (cholinergic). Epinephrine, norepinephrine, and methoxamine are sympathomimetic. In Guyton and Hall, 13th edition, Chapter 61, page 766, pilocarpine is muscarinic, others adrenergic.",
        "whyNotOtherOptions": {
            "a": "Epinephrine mimics sympathetic effects.",
            "b": "Norepinephrine is a sympathetic neurotransmitter.",
            "c": "Methoxamine is an alpha-agonist."
        },
        "relatedQuestions": ["36 (pilocarpine)", "34 (sweat glands)"],
        "category": "Autonomic Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 38,
        "question": "Which of the following cranial nerves is responsible for corneal sensitivity?",
        "options": [
            "Glossopharyngeal nerve",
            "Trochlear nerve",
            "Trigeminal nerve",
            "Abducens nerve",
            "Oculomotor nerve"
        ],
        "answer": 2,
        "correctAnswer": "Trigeminal nerve",
        "explanation": "The trigeminal nerve (V), via the ophthalmic branch, provides corneal sensation. In Guyton and Hall, 13th edition, Chapter 52, page 642, corneal sensitivity is trigeminal-mediated.",
        "whyNotOtherOptions": {
            "a": "Glossopharyngeal (IX) innervates throat/tongue.",
            "b": "Trochlear (IV) controls eye movement.",
            "d": "Abducens (VI) controls eye abduction.",
            "e": "Oculomotor (III) controls eye muscles/pupil."
        },
        "relatedQuestions": ["30 (facial nerve)", "40 (hypoglossal)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 39,
        "question": "Mechanism of action of acetylcholine when binding with M1 is via",
        "options": [
            "Formation of IP3 and DAG",
            "Activation of adenyl cyclase",
            "Hyperpolarization",
            "Opening Na+ channels",
            "Inhibition of Ca2+ channels"
        ],
        "answer": 0,
        "correctAnswer": "Formation of IP3 and DAG",
        "explanation": "M1 muscarinic receptors (Gq-coupled) activate phospholipase C, producing IP3 and DAG. In Guyton and Hall, 13th edition, Chapter 61, page 762, M1 signaling is via IP3/DAG.",
        "whyNotOtherOptions": {
            "b": "Adenyl cyclase is for beta receptors (cAMP).",
            "c": "M1 causes depolarization, not hyperpolarization.",
            "d": "Na+ channels are nicotinic receptor-mediated.",
            "e": "Ca2+ inhibition is not M1’s mechanism."
        },
        "relatedQuestions": ["36 (pilocarpine)", "35 (ANS neurotransmitters)"],
        "category": "Autonomic Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 40,
        "question": "If your tongue is atrophied, there is lesion in which cranial nerve?",
        "options": [
            "Facial",
            "Glossopharyngeal",
            "Vagus",
            "Hypoglossal",
            "Trigeminal"
        ],
        "answer": 3,
        "correctAnswer": "Hypoglossal",
        "explanation": "Hypoglossal nerve (XII) innervates tongue muscles; lesions cause atrophy. In Guyton and Hall, 13th edition, Chapter 55, page 674, hypoglossal controls tongue movement.",
        "whyNotOtherOptions": {
            "a": "Facial (VII) controls facial expression.",
            "b": "Glossopharyngeal (IX) is sensory for tongue.",
            "c": "Vagus (X) innervates pharynx/larynx.",
            "e": "Trigeminal (V) is sensory/motor for face."
        },
        "relatedQuestions": ["30 (facial nerve)", "38 (trigeminal)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 41,
        "question": "The work of breathing decreases when:",
        "options": [
            "Lung compliance increases",
            "The subject exercises",
            "The rate of breathing increases with constant minute volume",
            "The person lies down",
            "Functional residual capacity increases"
        ],
        "answer": 0,
        "correctAnswer": "Lung compliance increases",
        "explanation": "Increased lung compliance reduces elastic work of breathing. Exercise, rapid breathing, lying down, or increased FRC increase work. In Guyton and Hall, 13th edition, Chapter 40, pages 492-493, compliance lowers breathing work.",
        "whyNotOtherOptions": {
            "b": "Exercise increases breathing work.",
            "c": "Rapid shallow breathing increases work.",
            "d": "Lying down increases resistance.",
            "e": "Increased FRC (obstruction) increases work."
        },
        "relatedQuestions": ["42 (surfactant)", "43 (spirometry)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 42,
        "question": "Lack of surfactant substances as occur in infants with respiratory distress syndrome (RDS) results in:",
        "options": [
            "An increased lung compliance",
            "Stabilization of alveolar volume",
            "Lung collapse",
            "A reduced alveolar-arterial O2 tension difference"
        ],
        "answer": 2,
        "correctAnswer": "Lung collapse",
        "explanation": "Surfactant deficiency increases surface tension, causing alveolar collapse (atelectasis) in RDS. Compliance decreases, and O2 difference widens. In Guyton and Hall, 13th edition, Chapter 40, page 489, surfactant prevents collapse.",
        "whyNotOtherOptions": {
            "a": "Compliance decreases in RDS.",
            "b": "Surfactant stabilizes alveoli; lack causes collapse.",
            "d": "O2 difference increases in RDS."
        },
        "relatedQuestions": ["41 (compliance)", "47 (respiratory portion)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 43,
        "question": "The volumes and capacities that cannot be measured by direct spirometry include:",
        "options": [
            "Residual volume, expiratory reserve volume and inspiratory capacity",
            "Residual volume, Functional residual capacity and total lung capacity",
            "Inspiratory reserve volume, residual volume vital capacity",
            "Total lung capacity, residual volume and expiratory reserve volume",
            "Tidal volume, inspiratory reserve volume and inspiratory capacity"
        ],
        "answer": 1,
        "correctAnswer": "Residual volume, Functional residual capacity and total lung capacity",
        "explanation": "Spirometry cannot measure residual volume (RV), thus not FRC (ERV + RV) or TLC (VC + RV). In Guyton and Hall, 13th edition, Chapter 40, pages 485-487, these require helium dilution/plethysmography.",
        "whyNotOtherOptions": {
            "a": "ERV and inspiratory capacity are measurable.",
            "c": "IRV and VC are measurable.",
            "d": "ERV is measurable, unlike RV/TLC.",
            "e": "All are measurable by spirometry."
        },
        "relatedQuestions": ["41 (compliance)", "44 (TLC)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 44,
        "question": "The total lung capacity consists of:",
        "options": [
            "Vital capacity & tidal volume",
            "Residual volume & vital capacity",
            "Functional residual capacity & vital capacity",
            "Tidal volume & functional residual capacity",
            "Tidal volume & residual volume"
        ],
        "answer": 1,
        "correctAnswer": "Residual volume & vital capacity",
        "explanation": "TLC is vital capacity (VC) plus residual volume (RV). In Guyton and Hall, 13th edition, Chapter 40, page 485, TLC = VC + RV.",
        "whyNotOtherOptions": {
            "a": "Tidal volume is part of VC, not additive.",
            "c": "FRC plus VC double-counts volumes.",
            "d": "Tidal volume plus FRC is incomplete.",
            "e": "Tidal volume plus RV misses other volumes."
        },
        "relatedQuestions": ["43 (spirometry)", "41 (compliance)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 45,
        "question": "All of the following events occur during expiration except:",
        "options": [
            "Inspiratory muscles relax and the rib cage descends due to gravity",
            "Thoracic cavity volume decreases",
            "Intrapulmonary volume decreases",
            "Intrapulmonary pressure rises above atmospheric pressure (+1 mm Hg)",
            "Gases flow out of the lungs against the pressure gradient"
        ],
        "answer": 4,
        "correctAnswer": "Gases flow out of the lungs against the pressure gradient",
        "explanation": "Expiration involves muscle relaxation, reduced thoracic/lung volume, and increased intrapulmonary pressure (~+1 mm Hg), driving gas flow along the pressure gradient. Gases do not flow against it. In Guyton and Hall, 13th edition, Chapter 40, page 484, expiration follows the gradient.",
        "whyNotOtherOptions": {
            "a": "Relaxation and gravity drive quiet expiration.",
            "b": "Thoracic volume decreases in expiration.",
            "c": "Lung volume decreases, increasing pressure.",
            "d": "Pressure rises to drive gas out."
        },
        "relatedQuestions": ["41 (compliance)", "43 (spirometry)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 46,
        "question": "Defense function of the respiratory system is:",
        "options": [
            "Gas moistening",
            "Ciliary beating",
            "Warming of the air",
            "Smell",
            "Secretion of ACE"
        ],
        "answer": 1,
        "correctAnswer": "Ciliary beating",
        "explanation": "Ciliary beating (mucociliary escalator) clears pathogens. Moistening, warming, smell, and ACE are not defense functions. In Guyton and Hall, 13th edition, Chapter 39, page 479, mucociliary clearance is a key defense.",
        "whyNotOtherOptions": {
            "a": "Moistening conditions air, not defense.",
            "c": "Warming is conditioning, not defense.",
            "d": "Smell is sensory, not defense.",
            "e": "ACE is cardiovascular, not respiratory defense."
        },
        "relatedQuestions": ["42 (surfactant)", "47 (respiratory portion)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 47,
        "question": "Which structure of the following does not belong to the respiratory portion of the breathing organ?",
        "options": [
            "Terminal bronchioles",
            "Respiratory bronchioles",
            "Alveolar ducts",
            "Alveolar sacs",
            "None of the above"
        ],
        "answer": 0,
        "correctAnswer": "Terminal bronchioles",
        "explanation": "The respiratory portion includes respiratory bronchioles, alveolar ducts, and sacs (gas exchange). Terminal bronchioles are conducting zone. In Guyton and Hall, 13th edition, Chapter 39, page 476, respiratory zone starts at respiratory bronchioles.",
        "whyNotOtherOptions": {
            "b": "Respiratory bronchioles are in respiratory zone.",
            "c": "Alveolar ducts are in respiratory zone.",
            "d": "Alveolar sacs are in respiratory zone.",
            "e": "Option A is correct, so E is invalid."
        },
        "relatedQuestions": ["42 (surfactant)", "46 (ciliary beating)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 48,
        "question": "Bronchial obstruction is likely to be relieved by",
        "options": [
            "Stimulation of cholinergic receptors",
            "Stimulation of beta adrenoceptors",
            "Histamine",
            "Stimulation of mast cell membranes",
            "Slow reactive substance of anaphylaxis"
        ],
        "answer": 1,
        "correctAnswer": "Stimulation of beta adrenoceptors",
        "explanation": "Beta-2 receptor stimulation causes bronchodilation. Cholinergic, histamine, and leukotrienes (SRS-A) cause constriction. In Guyton and Hall, 13th edition, Chapter 61, page 764, beta-2 mediates bronchodilation.",
        "whyNotOtherOptions": {
            "a": "Cholinergic stimulation causes bronchoconstriction.",
            "c": "Histamine causes bronchoconstriction.",
            "d": "Mast cell stimulation releases constrictive mediators.",
            "e": "SRS-A (leukotrienes) causes constriction."
        },
        "relatedQuestions": ["32 (beta receptors)", "46 (respiratory defense)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 49,
        "question": "Respiratory function of the respiratory system is:",
        "options": [
            "Acid base balance",
            "Air conditioning",
            "Phonation",
            "Gas conduction",
            "Olfaction"
        ],
        "answer": 0,
        "correctAnswer": "Acid base balance",
        "explanation": "Gas exchange regulates CO2, affecting pH (acid-base balance). Air conditioning, phonation, conduction, and olfaction are non-respiratory. In Guyton and Hall, 13th edition, Chapter 42, pages 511-512, CO2 regulation is linked to acid-base.",
        "whyNotOtherOptions": {
            "b": "Air conditioning is preparatory, not respiratory.",
            "c": "Phonation is a vocal function.",
            "d": "Gas conduction is structural, not functional.",
            "e": "Olfaction is sensory, not respiratory."
        },
        "relatedQuestions": ["42 (surfactant)", "46 (ciliary beating)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 50,
        "question": "The amount of fluid filtered per minute in all nephrons of both kidneys is called:",
        "options": [
            "Glomerular filtration rate",
            "Filtration fraction",
            "Filtration pressure",
            "Renal blood flow",
            "Tubular transport maximum"
        ],
        "answer": 0,
        "correctAnswer": "Glomerular filtration rate",
        "explanation": "GFR is the volume filtered per minute by all nephrons. In Guyton and Hall, 13th edition, Chapter 26, page 315, GFR is defined as such.",
        "whyNotOtherOptions": {
            "b": "Filtration fraction is GFR/RBF ratio.",
            "c": "Filtration pressure drives filtration, not volume.",
            "d": "RBF is blood flow, not filtrate.",
            "e": "Tubular transport maximum is reabsorption limit."
        },
        "relatedQuestions": ["51 (filtration pressure)", "55 (GFR factors)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 51,
        "question": "The net pressure in the glomerular capillaries that pushes fluid outward is called",
        "options": [
            "Glomerular capillary pressure",
            "Glomerular colloid osmotic capillary pressure",
            "Bowman’s capsular pressure",
            "Filtration pressure",
            "Mean systemic capillary filling pressure"
        ],
        "answer": 3,
        "correctAnswer": "Filtration pressure",
        "explanation": "Net filtration pressure drives fluid out, calculated as glomerular hydrostatic pressure minus opposing pressures. In Guyton and Hall, 13th edition, Chapter 26, page 318, it’s Pg - (Pi + Pc).",
        "whyNotOtherOptions": {
            "a": "Glomerular pressure is one component, not net.",
            "b": "Colloid osmotic pressure opposes filtration.",
            "c": "Bowman’s pressure opposes filtration.",
            "e": "Systemic pressure is unrelated to glomerular filtration."
        },
        "relatedQuestions": ["50 (GFR)", "57 (GFR factors)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 52,
        "question": "Part of the renal tubules where nutritionally important substances are reabsorbed is called",
        "options": [
            "Collecting duct",
            "Proximal tubules",
            "Distal tubules",
            "Loop of Henle",
            "Urinary bladder"
        ],
        "answer": 1,
        "correctAnswer": "Proximal tubules",
        "explanation": "Proximal tubules reabsorb ~65% of nutrients (glucose, amino acids). In Guyton and Hall, 13th edition, Chapter 27, page 332, proximal tubule is noted for nutrient reabsorption.",
        "whyNotOtherOptions": {
            "a": "Collecting duct regulates water/electrolytes.",
            "c": "Distal tubules regulate ions/acid-base.",
            "d": "Loop of Henle concentrates urine.",
            "e": "Bladder stores urine, no reabsorption."
        },
        "relatedQuestions": ["10 (glucose transport)", "53 (renal threshold)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 53,
        "question": "The renal threshold for glucose is equal to",
        "options": [
            "340 mg/ml",
            "200 mg/dl",
            "125 ml/min",
            "80-120 mg/dl",
            "40 mg/dl"
        ],
        "answer": 1,
        "correctAnswer": "200 mg/dl",
        "explanation": "Renal threshold for glucose is ~180-200 mg/dL, above which glucosuria occurs. In Guyton and Hall, 13th edition, Chapter 27, page 336, threshold is ~200 mg/dL.",
        "whyNotOtherOptions": {
            "a": "340 mg/ml is too high (unit error).",
            "c": "125 ml/min is GFR, not threshold.",
            "d": "80-120 mg/dl is below threshold.",
            "e": "40 mg/dl is far below threshold."
        },
        "relatedQuestions": ["10 (glucose transport)", "52 (proximal tubules)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 54,
        "question": "Renal tubules upon which ADH and aldosterone act to promote water-electrolyte reabsorption are/is",
        "options": [
            "Distal tubules and collecting duct",
            "Proximal tubules",
            "Loop of Henle",
            "Glomerulus",
            "Afferent and efferent arterioles"
        ],
        "answer": 0,
        "correctAnswer": "Distal tubules and collecting duct",
        "explanation": "ADH increases water permeability, and aldosterone enhances Na+ reabsorption in distal tubules/collecting ducts. In Guyton and Hall, 13th edition, Chapters 28, 76, pages 344, 953, these actions are detailed.",
        "whyNotOtherOptions": {
            "b": "Proximal tubules reabsorb nutrients, less hormone-regulated.",
            "c": "Loop of Henle is not primary for ADH/aldosterone.",
            "d": "Glomerulus filters, no reabsorption.",
            "e": "Arterioles regulate blood flow, not reabsorption."
        },
        "relatedQuestions": ["50 (GFR)", "82 (fluid balance)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 55,
        "question": "Which factors of the following increases glomerular filtration rate?",
        "options": [
            "Afferent arteriole constriction",
            "Efferent arteriole vasodilation",
            "Decrease in filtration pressure",
            "Congestive heart failure",
            "Increase in the renal blood flow"
        ],
        "answer": 4,
        "correctAnswer": "Increase in the renal blood flow",
        "explanation": "Increased renal blood flow raises glomerular pressure, increasing GFR. Others reduce GFR. In Guyton and Hall, 13th edition, Chapter 26, page 321, increased RBF raises GFR.",
        "whyNotOtherOptions": {
            "a": "Afferent constriction reduces GFR.",
            "b": "Efferent vasodilation lowers glomerular pressure.",
            "c": "Decreased filtration pressure reduces GFR.",
            "d": "Heart failure reduces RBF, lowering GFR."
        },
        "relatedQuestions": ["50 (GFR)", "57 (GFR factors)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 56,
        "question": "Which of the following is true regarding control of the GFR and RBF?",
        "options": [
            "Strong activation of sympathetic NS causes marked vasoconstriction of efferent arterioles",
            "Angiotensin II causes efferent arteriolar vasoconstriction",
            "Angiotensin II increases flow through peritubular capillaries",
            "ANP (released by atria when stretched) decreases GFR",
            "Endothelin increases GFR"
        ],
        "answer": 1,
        "correctAnswer": "Angiotensin II causes efferent arteriolar vasoconstriction",
        "explanation": "Angiotensin II constricts efferent arterioles, maintaining GFR. Sympathetic constricts both arterioles; ANP increases GFR; endothelin reduces GFR. In Guyton and Hall, 13th edition, Chapter 26, page 323, angiotensin II’s effect is detailed.",
        "whyNotOtherOptions": {
            "a": "Sympathetic constricts both arterioles.",
            "c": "Angiotensin II reduces peritubular flow.",
            "d": "ANP increases GFR by vasodilation.",
            "e": "Endothelin reduces GFR by vasoconstriction."
        },
        "relatedQuestions": ["55 (GFR factors)", "51 (filtration pressure)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 57,
        "question": "Which of the following factors is not in favor of GFR?",
        "options": [
            "Increased capillary hydrostatic pressure of the glomerulus",
            "Decreased capsular hydrostatic pressure",
            "Decreased glomerular oncotic pressure",
            "Efferent arteriolar vasoconstriction",
            "Afferent arteriolar vasoconstriction"
        ],
        "answer": 4,
        "correctAnswer": "Afferent arteriolar vasoconstriction",
        "explanation": "Afferent vasoconstriction reduces glomerular blood flow, lowering GFR. Others increase GFR. In Guyton and Hall, 13th edition, Chapter 26, page 319, afferent constriction lowers GFR.",
        "whyNotOtherOptions": {
            "a": "Increased hydrostatic pressure raises GFR.",
            "b": "Decreased capsular pressure favors filtration.",
            "c": "Decreased oncotic pressure favors filtration.",
            "d": "Efferent constriction increases glomerular pressure."
        },
        "relatedQuestions": ["55 (GFR factors)", "51 (filtration pressure)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 58,
        "question": "Bowman’s capsular hydrostatic pressure is because of:",
        "options": [
            "Renal blood flow",
            "Glomerular oncotic pressure",
            "Glomerular hydrostatic pressure",
            "Glomerular filtrate",
            "Sympathetic stimulation"
        ],
        "answer": 3,
        "correctAnswer": "Glomerular filtrate",
        "explanation": "Bowman’s capsule pressure results from filtrate accumulation, opposing filtration. In Guyton and Hall, 13th edition, Chapter 26, page 318, this is attributed to filtrate.",
        "whyNotOtherOptions": {
            "a": "RBF affects glomerular pressure, not capsular.",
            "b": "Oncotic pressure is in capillaries, not capsule.",
            "c": "Glomerular pressure drives filtration, not capsular pressure.",
            "e": "Sympathetic affects arterioles, not capsule."
        },
        "relatedQuestions": ["51 (filtration pressure)", "57 (GFR factors)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 59,
        "question": "Which factor of the following inhibits motility of the GIT?",
        "options": [
            "Sympathetic stimulation",
            "Parasympathetic stimulation",
            "Myenteric nerve plexus",
            "A hormone gastrin",
            "Motilin"
        ],
        "answer": 0,
        "correctAnswer": "Sympathetic stimulation",
        "explanation": "Sympathetic stimulation inhibits GI motility; others enhance it. In Guyton and Hall, 13th edition, Chapter 63, page 797, sympathetic inhibition is noted.",
        "whyNotOtherOptions": {
            "b": "Parasympathetic stimulates motility.",
            "c": "Myenteric plexus promotes motility.",
            "d": "Gastrin enhances gastric motility.",
            "e": "Motilin stimulates intestinal motility."
        },
        "relatedQuestions": ["66 (GIT regulation)", "68 (gastrin)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 60,
        "question": "Ptyalin (amylase) is produced by:",
        "options": [
            "The parotid gland",
            "Parietal cells",
            "Chief cells",
            "Enteroendocrine cells"
        ],
        "answer": 0,
        "correctAnswer": "The parotid gland",
        "explanation": "Ptyalin (salivary amylase) is secreted by parotid glands. In Guyton and Hall, 13th edition, Chapter 64, page 806, parotid produces salivary amylase.",
        "whyNotOtherOptions": {
            "b": "Parietal cells secrete HCl/intrinsic factor.",
            "c": "Chief cells secrete pepsinogen.",
            "d": "Enteroendocrine cells secrete hormones."
        },
        "relatedQuestions": ["30 (facial nerve)", "65 (CHO digestion)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 61,
        "question": "Secretion of HCl by parietal cells in the stomach is increased by",
        "options": [
            "Parasympathetic stimulation",
            "Drinking coffee and alcohol",
            "Release of histamine by mast cells",
            "Infection with helicobacter pylori",
            "All are correct"
        ],
        "answer": 4,
        "correctAnswer": "All are correct",
        "explanation": "HCl secretion by parietal cells is stimulated by parasympathetic input (vagus nerve), histamine (from mast cells), caffeine/alcohol (via gastrin or direct stimulation), and H. pylori (via inflammation). In Guyton and Hall Textbook of Medical Physiology, 13th edition, Chapter 65, page 817, these factors are listed as stimulants of gastric acid secretion.",
        "whyNotOtherOptions": {
            "a": "Vagal stimulation increases HCl via acetylcholine.",
            "b": "Coffee/alcohol stimulate gastrin, increasing HCl.",
            "c": "Histamine from mast cells activates H2 receptors, increasing HCl.",
            "d": "H. pylori inflammation enhances gastrin and HCl."
        },
        "relatedQuestions": ["59 (GIT motility)", "68 (gastrin)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 62,
        "question": "The major stimulus for the release of secretin hormone is",
        "options": [
            "Protein digestion products",
            "Histamine",
            "Somatostatin",
            "Acidic chyme in the duodenum",
            "Fat digestion products"
        ],
        "answer": 3,
        "correctAnswer": "Acidic chyme in the duodenum",
        "explanation": "Acidic chyme in the duodenum triggers secretin release from S cells, promoting pancreatic bicarbonate secretion to neutralize acid. In Guyton and Hall, 13th edition, Chapter 65, page 820, acid is the primary stimulus for secretin.",
        "whyNotOtherOptions": {
            "a": "Proteins stimulate CCK, not secretin.",
            "b": "Histamine affects gastric acid, not secretin.",
            "c": "Somatostatin inhibits secretions, not a stimulus.",
            "e": "Fat stimulates CCK, not primarily secretin."
        },
        "relatedQuestions": ["70 (CCK)", "71 (CCK stimulus)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 63,
        "question": "GIT layers that contains much of glands is",
        "options": [
            "Serosa",
            "Muscularis",
            "Submucosa",
            "Mucosa",
            "All"
        ],
        "answer": 3,
        "correctAnswer": "Mucosa",
        "explanation": "The mucosa contains most GI glands (e.g., gastric pits, intestinal crypts). Submucosa has some glands (e.g., Brunner’s), but mucosa is primary. In Guyton and Hall, 13th edition, Chapter 63, page 793, the mucosa is described as gland-rich.",
        "whyNotOtherOptions": {
            "a": "Serosa is the outer connective layer, no glands.",
            "b": "Muscularis is for motility, no glands.",
            "c": "Submucosa has some glands, but fewer than mucosa.",
            "e": "Only mucosa is gland-rich, not all layers."
        },
        "relatedQuestions": ["61 (HCl secretion)", "67 (pepsin)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 64,
        "question": "Center for chewing is located in the",
        "options": [
            "Medulla",
            "Pons",
            "Midbrain",
            "Spinal cord",
            "Cerebrum"
        ],
        "answer": 0,
        "correctAnswer": "Medulla",
        "explanation": "The chewing reflex center is in the medulla oblongata, coordinating mastication. In Guyton and Hall, 13th edition, Chapter 64, page 805, the medulla is identified as the chewing center.",
        "whyNotOtherOptions": {
            "b": "Pons relays signals, not primary for chewing.",
            "c": "Midbrain is involved in visual/auditory reflexes.",
            "d": "Spinal cord controls spinal reflexes, not chewing.",
            "e": "Cerebrum handles voluntary control, not reflex."
        },
        "relatedQuestions": ["30 (facial nerve)", "75 (swallowing)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 65,
        "question": "Which of the following food item is chemically digested in the mouth?",
        "options": [
            "Protein",
            "Fat",
            "CHO",
            "Vitamin",
            "Mineral"
        ],
        "answer": 2,
        "correctAnswer": "CHO",
        "explanation": "Carbohydrates (CHO) are digested in the mouth by salivary amylase (ptyalin), breaking down starches. Proteins, fats, vitamins, and minerals are not enzymatically digested in the mouth. In Guyton and Hall, 13th edition, Chapter 65, page 818, salivary amylase initiates starch digestion.",
        "whyNotOtherOptions": {
            "a": "Protein digestion begins in the stomach (pepsin).",
            "b": "Fat digestion starts in the duodenum (lipase).",
            "d": "Vitamins are absorbed, not digested.",
            "e": "Minerals are absorbed, not digested."
        },
        "relatedQuestions": ["60 (ptyalin)", "61 (HCl secretion)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 66,
        "question": "Which of the following is correct regarding GIT regulation?",
        "options": [
            "Parasympathetic nervous system has excitatory effect on GI function.",
            "Salivary secretion is mainly regulated by gastric hormone.",
            "Sympathetic nerves have excitatory effect on the GI functions.",
            "Secretin hormone inhibits pancreatic secretions.",
            "None of the above."
        ],
        "answer": 0,
        "correctAnswer": "Parasympathetic nervous system has excitatory effect on GI function.",
        "explanation": "Parasympathetic (vagal) stimulation excites GI motility and secretion. Salivary secretion is ANS-regulated, sympathetic inhibits GI, and secretin stimulates pancreatic bicarbonate. In Guyton and Hall, 13th edition, Chapter 63, page 798, parasympathetic excitation is detailed.",
        "whyNotOtherOptions": {
            "b": "Salivary secretion is ANS-driven, not gastric hormone.",
            "c": "Sympathetic nerves inhibit GI functions.",
            "d": "Secretin stimulates pancreatic bicarbonate.",
            "e": "Option A is correct, so E is invalid."
        },
        "relatedQuestions": ["59 (GIT motility)", "62 (secretin)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 67,
        "question": "Identify an enzyme secreted by the chief cells of the stomach:",
        "options": [
            "HCl",
            "Pepsin",
            "Mucus",
            "Intrinsic factor",
            "None of the above"
        ],
        "answer": 1,
        "correctAnswer": "Pepsin",
        "explanation": "Chief cells secrete pepsinogen, which becomes pepsin, a digestive enzyme. HCl and intrinsic factor are from parietal cells, mucus from surface cells. In Guyton and Hall, 13th edition, Chapter 65, page 816, chief cells are noted for pepsinogen secretion.",
        "whyNotOtherOptions": {
            "a": "HCl is secreted by parietal cells.",
            "c": "Mucus is secreted by mucous cells.",
            "d": "Intrinsic factor is from parietal cells.",
            "e": "Option B is correct, so E is invalid."
        },
        "relatedQuestions": ["61 (HCl secretion)", "63 (mucosa)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 68,
        "question": "An endocrine function of the stomach is the fact that it secretes:",
        "options": [
            "HCl",
            "Pepsin",
            "Intrinsic factor",
            "Mucus",
            "Gastrin"
        ],
        "answer": 4,
        "correctAnswer": "Gastrin",
        "explanation": "Gastrin, secreted by G cells, is the stomach’s endocrine hormone, stimulating HCl secretion and motility. Others are exocrine or local secretions. In Guyton and Hall, 13th edition, Chapter 65, page 817, gastrin is identified as hormonal.",
        "whyNotOtherOptions": {
            "a": "HCl is an exocrine secretion.",
            "b": "Pepsin is an exocrine enzyme.",
            "c": "Intrinsic factor is exocrine, aiding B12 absorption.",
            "d": "Mucus is a local protective secretion."
        },
        "relatedQuestions": ["61 (HCl secretion)", "66 (GIT regulation)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 69,
        "question": "The hardest part of the teeth is",
        "options": [
            "Crown",
            "Dentin",
            "Enamel",
            "Root",
            "None"
        ],
        "answer": 2,
        "correctAnswer": "Enamel",
        "explanation": "Enamel, a highly mineralized layer, is the hardest substance in the body. In Guyton and Hall, 13th edition, Chapter 64, page 804, enamel is described as the hardest tooth component.",
        "whyNotOtherOptions": {
            "a": "Crown includes enamel but is not the hardest part.",
            "b": "Dentin is less hard than enamel.",
            "d": "Root contains dentin, less hard than enamel.",
            "e": "Option C is correct, so E is invalid."
        },
        "relatedQuestions": ["64 (chewing)", "72 (premolars)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 70,
        "question": "A hormone that causes release of bile from the gall bladder is:",
        "options": [
            "Secretin",
            "Cholecystokinin",
            "Gastric inhibitory peptide",
            "Gastrin",
            "Sympathetic nervous system"
        ],
        "answer": 1,
        "correctAnswer": "Cholecystokinin",
        "explanation": "Cholecystokinin (CCK) causes gallbladder contraction and bile release. In Guyton and Hall, 13th edition, Chapter 65, page 821, CCK is noted for this role.",
        "whyNotOtherOptions": {
            "a": "Secretin promotes pancreatic bicarbonate, not bile.",
            "c": "GIP affects insulin, not bile.",
            "d": "Gastrin stimulates gastric acid, not bile.",
            "e": "Sympathetic system is not a hormone."
        },
        "relatedQuestions": ["62 (secretin)", "71 (CCK stimulus)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 71,
        "question": "Stimulus for the secretion of cholecystokinin is",
        "options": [
            "Protein digestion products",
            "Histamine",
            "Somatostatin",
            "Acidic chyme in the duodenum",
            "Fat digestion products"
        ],
        "answer": 4,
        "correctAnswer": "Fat digestion products",
        "explanation": "Fatty acids and monoglycerides in the duodenum are the primary stimuli for CCK release, though proteins contribute. In Guyton and Hall, 13th edition, Chapter 65, page 821, fat digestion products are the main trigger.",
        "whyNotOtherOptions": {
            "a": "Proteins contribute but are secondary to fats.",
            "b": "Histamine affects gastric acid, not CCK.",
            "c": "Somatostatin inhibits secretions, not a stimulus.",
            "d": "Acidic chyme triggers secretin, not CCK."
        },
        "relatedQuestions": ["62 (secretin)", "70 (CCK)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 72,
        "question": "The total number of premolar teeth in adults is",
        "options": [
            "8",
            "4",
            "12",
            "16",
            "20"
        ],
        "answer": 0,
        "correctAnswer": "8",
        "explanation": "Adults have 8 premolars (4 upper, 4 lower) in a 32-tooth dentition. In Guyton and Hall, 13th edition, Chapter 64, page 804, adult dentition includes 8 premolars.",
        "whyNotOtherOptions": {
            "b": "4 is too few; each quadrant has 2 premolars.",
            "c": "12 exceeds total premolars.",
            "d": "16 includes other teeth types.",
            "e": "20 includes additional teeth types."
        },
        "relatedQuestions": ["69 (enamel)", "64 (chewing)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 73,
        "question": "Which one of the following is secreted into the colon?",
        "options": [
            "Glucose",
            "Glycine",
            "Bile Salts",
            "Calcium",
            "Bicarbonate"
        ],
        "answer": 4,
        "correctAnswer": "Bicarbonate",
        "explanation": "The colon secretes bicarbonate to neutralize acids from bacterial fermentation. Bile salts are reabsorbed in the ileum. In Guyton and Hall, 13th edition, Chapter 65, page 826, bicarbonate secretion is noted in the colon.",
        "whyNotOtherOptions": {
            "a": "Glucose is absorbed, not secreted.",
            "b": "Glycine is not secreted in the colon.",
            "c": "Bile salts are reabsorbed in the ileum.",
            "d": "Calcium is absorbed, not secreted."
        },
        "relatedQuestions": ["70 (CCK)", "74 (bile salts)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 74,
        "question": "Bile salts are secreted into what region of the small intestine?",
        "options": [
            "Jejunum",
            "Duodenum",
            "Ileum",
            "Splanchnic Circulation",
            "Enterohepatic Circulation"
        ],
        "answer": 1,
        "correctAnswer": "Duodenum",
        "explanation": "Bile salts are secreted into the duodenum via the common bile duct to aid fat digestion. In Guyton and Hall, 13th edition, Chapter 65, page 821, bile release into the duodenum is described.",
        "whyNotOtherOptions": {
            "a": "Jejunum receives bile but is not primary site.",
            "c": "Ileum reabsorbs bile salts.",
            "d": "Splanchnic circulation is vascular, not a site.",
            "e": "Enterohepatic circulation is a process, not a site."
        },
        "relatedQuestions": ["70 (CCK)", "73 (colon secretion)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 75,
        "question": "Center for swallowing is located in the",
        "options": [
            "Hypothalamus",
            "Medulla oblongata",
            "Pons",
            "Mid-brain",
            "Cortex"
        ],
        "answer": 1,
        "correctAnswer": "Medulla oblongata",
        "explanation": "The swallowing center in the medulla oblongata coordinates the swallowing reflex. In Guyton and Hall, 13th edition, Chapter 64, page 807, the medulla is identified as the swallowing center.",
        "whyNotOtherOptions": {
            "a": "Hypothalamus regulates autonomic functions, not swallowing.",
            "c": "Pons relays signals, not primary for swallowing.",
            "d": "Midbrain handles sensory/motor reflexes, not swallowing.",
            "e": "Cortex initiates voluntary swallowing, not reflex."
        },
        "relatedQuestions": ["64 (chewing)", "30 (facial nerve)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 76,
        "question": "Identify a hormone whose action is exhibited via gene expression:",
        "options": [
            "Insulin",
            "Aldosterone",
            "Catecholamine",
            "Calcitonin",
            "Oxytocin"
        ],
        "answer": 1,
        "correctAnswer": "Aldosterone",
        "explanation": "Aldosterone, a steroid hormone, acts via nuclear receptors to regulate gene expression (e.g., Na+ channels). Others are peptide/amine hormones with membrane receptors. In Guyton and Hall, 13th edition, Chapter 74, page 917, steroid hormone mechanisms are described.",
        "whyNotOtherOptions": {
            "a": "Insulin acts via membrane receptors.",
            "c": "Catecholamines use membrane receptors (cAMP).",
            "d": "Calcitonin is a peptide, acts via membrane receptors.",
            "e": "Oxytocin uses membrane receptors."
        },
        "relatedQuestions": ["79 (intracellular receptors)", "82 (fluid balance)"],
        "category": "Endocrine Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 77,
        "question": "The hormone that is stored in the form of preprohormone is:",
        "options": [
            "Insulin",
            "Aldosterone",
            "Thyroxine",
            "Testosterone",
            "Cortisol"
        ],
        "answer": 0,
        "correctAnswer": "Insulin",
        "explanation": "Insulin is synthesized as preproinsulin, cleaved to proinsulin, then mature insulin. Steroid hormones (aldosterone, testosterone, cortisol) and thyroxine (amine) are not stored as preprohormones. In Guyton and Hall, 13th edition, Chapter 79, page 974, insulin’s preproinsulin synthesis is detailed.",
        "whyNotOtherOptions": {
            "b": "Aldosterone is a steroid, not stored as preprohormone.",
            "c": "Thyroxine is amine-derived, not a preprohormone.",
            "d": "Testosterone is a steroid, not stored as preprohormone.",
            "e": "Cortisol is a steroid, not stored as preprohormone."
        },
        "relatedQuestions": ["76 (aldosterone)", "78 (amine hormone)"],
        "category": "Endocrine Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 78,
        "question": "From the given options below, which one is an amine hormone?",
        "options": [
            "Growth hormone",
            "T3",
            "ADH",
            "Cortisol"
        ],
        "answer": 1,
        "correctAnswer": "T3",
        "explanation": "T3 (triiodothyronine) is an amine hormone derived from tyrosine. Growth hormone and ADH are peptides; cortisol is a steroid. In Guyton and Hall, 13th edition, Chapter 74, page 912, thyroid hormones are classified as amine hormones.",
        "whyNotOtherOptions": {
            "a": "Growth hormone is a peptide hormone.",
            "c": "ADH is a peptide hormone.",
            "d": "Cortisol is a steroid hormone."
        },
        "relatedQuestions": ["77 (insulin)", "81 (T3 receptors)"],
        "category": "Endocrine Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 79,
        "question": "Which hormone of the following has receptors inside the cell?",
        "options": [
            "ADH",
            "Insulin",
            "Growth hormone",
            "Glucagon",
            "Aldosterone"
        ],
        "answer": 4,
        "correctAnswer": "Aldosterone",
        "explanation": "Aldosterone, a steroid hormone, binds intracellular nuclear receptors to regulate gene expression. ADH, insulin, growth hormone, and glucagon bind membrane receptors. In Guyton and Hall, 13th edition, Chapter 74, page 916, steroid receptors are intracellular.",
        "whyNotOtherOptions": {
            "a": "ADH binds membrane receptors (V1/V2).",
            "b": "Insulin binds membrane tyrosine kinase receptors.",
            "c": "Growth hormone binds membrane receptors.",
            "d": "Glucagon binds membrane receptors (cAMP)."
        },
        "relatedQuestions": ["76 (aldosterone)", "82 (fluid balance)"],
        "category": "Endocrine Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 80,
        "question": "A phenomenon regulated by a positive feedback mechanism is:",
        "options": [
            "Secretion of insulin",
            "Milk ejection reflex",
            "Gonadal function",
            "Growth",
            "Secretion of T3 and T4"
        ],
        "answer": 1,
        "correctAnswer": "Milk ejection reflex",
        "explanation": "The milk ejection reflex (oxytocin release) is driven by positive feedback, where suckling amplifies oxytocin release. Others are negative feedback-regulated. In Guyton and Hall, 13th edition, Chapter 1, page 6, and Chapter 84, page 1039, milk ejection is a positive feedback example.",
        "whyNotOtherOptions": {
            "a": "Insulin secretion is negative feedback (glucose).",
            "c": "Gonadal function is negative feedback (HPA axis).",
            "d": "Growth is regulated by negative feedback.",
            "e": "T3/T4 secretion is negative feedback (TSH)."
        },
        "relatedQuestions": ["1 (negative feedback)", "85 (LH ovulation)"],
        "category": "Endocrine Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 81,
        "question": "Being non-steroidal but having intracellular receptor is:",
        "options": [
            "Epinephrine",
            "Dopamine",
            "T3",
            "Somatostatin",
            "Serotonin"
        ],
        "answer": 2,
        "correctAnswer": "T3",
        "explanation": "T3 (thyroid hormone) is a non-steroidal amine hormone that binds intracellular nuclear receptors to regulate gene expression. Others use membrane receptors. In Guyton and Hall, 13th edition, Chapter 76, page 943, T3/T4 receptors are nuclear.",
        "whyNotOtherOptions": {
            "a": "Epinephrine uses membrane receptors (adrenergic).",
            "b": "Dopamine uses membrane receptors.",
            "d": "Somatostatin is a peptide, uses membrane receptors.",
            "e": "Serotonin uses membrane receptors."
        },
        "relatedQuestions": ["78 (amine hormone)", "79 (aldosterone)"],
        "category": "Endocrine Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 82,
        "question": "Hormones designed for the regulation of fluid and electrolyte balance are:",
        "options": [
            "Growth hormone and insulin",
            "Aldosterone and insulin",
            "Aldosterone and ADH",
            "Oxytocin and ADH",
            "T3 and T4"
        ],
        "answer": 2,
        "correctAnswer": "Aldosterone and ADH",
        "explanation": "Aldosterone regulates Na+ retention, and ADH regulates water reabsorption, both critical for fluid/electrolyte balance. In Guyton and Hall, 13th edition, Chapter 28, page 343, these hormones are highlighted for this role.",
        "whyNotOtherOptions": {
            "a": "Growth hormone/insulin regulate growth/metabolism.",
            "b": "Insulin regulates glucose, not electrolytes.",
            "d": "Oxytocin affects labor/milk ejection, not fluids.",
            "e": "T3/T4 regulate metabolism, not fluids."
        },
        "relatedQuestions": ["54 (ADH/aldosterone)", "79 (aldosterone)"],
        "category": "Endocrine Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 83,
        "question": "A hormone whose secretion is excess during the time of deep sleep is:",
        "options": [
            "Growth hormone",
            "Insulin",
            "Cortisol",
            "Adrenalin",
            "ADH"
        ],
        "answer": 0,
        "correctAnswer": "Growth hormone",
        "explanation": "Growth hormone (GH) secretion peaks during deep (slow-wave) sleep. In Guyton and Hall, 13th edition, Chapter 75, page 931, GH pulses are noted during sleep.",
        "whyNotOtherOptions": {
            "b": "Insulin is regulated by glucose, not sleep.",
            "c": "Cortisol peaks in the morning, not sleep.",
            "d": "Adrenalin is stress-related, not sleep-related.",
            "e": "ADH is regulated by osmolarity, not sleep."
        },
        "relatedQuestions": ["76 (aldosterone)", "77 (insulin)"],
        "category": "Endocrine Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 84,
        "question": "Mullerian duct develops into the:",
        "options": [
            "Ovaries",
            "Female genital tract",
            "Male accessory glands",
            "Female external genitalia",
            "Ovaries"
        ],
        "answer": 1,
        "correctAnswer": "Female genital tract",
        "explanation": "Mullerian ducts develop into the female internal genital tract (fallopian tubes, uterus, upper vagina). Ovaries and external genitalia arise from different structures; male glands from Wolffian ducts. In Guyton and Hall, 13th edition, Chapter 82, page 1015, Mullerian ducts form the female tract. Note: Option A repeated as E, likely a typo.",
        "whyNotOtherOptions": {
            "a": "Ovaries develop from gonadal ridges.",
            "c": "Male glands develop from Wolffian ducts.",
            "d": "External genitalia arise from genital tubercle.",
            "e": "Same as A, ovaries not from Mullerian ducts."
        },
        "relatedQuestions": ["Embryology 1 (Mullerian ducts)", "Embryology 2 (Wolffian ducts)", "89 (fertilization)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 85,
        "question": "Which one of the following is known to be the hormone of ovulation?",
        "options": [
            "FSH",
            "Estradiol",
            "Progesterone",
            "hCG",
            "LH"
        ],
        "answer": 4,
        "correctAnswer": "LH",
        "explanation": "The luteinizing hormone (LH) surge triggers ovulation by stimulating follicle rupture. In Guyton and Hall, 13th edition, Chapter 83, page 1022, LH is identified as the ovulation trigger.",
        "whyNotOtherOptions": {
            "a": "FSH promotes follicle growth, not ovulation.",
            "b": "Estradiol supports follicle development.",
            "c": "Progesterone maintains pregnancy post-ovulation.",
            "d": "hCG maintains corpus luteum, not ovulation."
        },
        "relatedQuestions": ["80 (positive feedback)", "90 (proliferative phase)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 86,
        "question": "Which of the following is not a haploid cell?",
        "options": [
            "Spermatogonium",
            "Secondary oocytes",
            "Spermatids",
            "Oocyte",
            "Ovum"
        ],
        "answer": 0,
        "correctAnswer": "Spermatogonium",
        "explanation": "Spermatogonia are diploid germ cells. Secondary oocytes, spermatids, and ovum are haploid (post-meiosis). ‘Oocyte’ likely refers to secondary oocyte, which is haploid. In Guyton and Hall, 13th edition, Chapter 82, page 1008, spermatogonia are diploid, while spermatids/oocytes are haploid.",
        "whyNotOtherOptions": {
            "b": "Secondary oocytes are haploid post-meiosis I.",
            "c": "Spermatids are haploid post-meiosis.",
            "d": "Oocyte (secondary) is haploid in context.",
            "e": "Ovum is haploid, mature egg."
        },
        "relatedQuestions": ["Embryology 10 (gametogenesis)", "89 (fertilization)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 87,
        "question": "In the male sexual act, the erection phase is under the regulation of the",
        "options": [
            "Parasympathetic nervous system",
            "Sympathetic nervous system",
            "Somatic pudendal nerve",
            "The vagus nerve from medulla",
            "Phrenic nerve of the cervical segment"
        ],
        "answer": 0,
        "correctAnswer": "Parasympathetic nervous system",
        "explanation": "Erection is mediated by parasympathetic nerves (pelvic) causing vasodilation. In Guyton and Hall, 13th edition, Chapter 81, page 1005, parasympathetic innervation drives erection.",
        "whyNotOtherOptions": {
            "b": "Sympathetic mediates emission/ejaculation.",
            "c": "Pudendal nerve controls perineal muscles.",
            "d": "Vagus nerve is not involved in erection.",
            "e": "Phrenic nerve controls diaphragm, not erection."
        },
        "relatedQuestions": ["Embryology 2 (Wolffian ducts)", "33 (autonomic innervation)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 88,
        "question": "The function of the uterus is:",
        "options": [
            "Hormone secretion",
            "Essential reproductive organ",
            "Site for normal pregnancy",
            "Gametogenesis",
            "None of the above"
        ],
        "answer": 2,
        "correctAnswer": "Site for normal pregnancy",
        "explanation": "The uterus is the primary site for embryo implantation and pregnancy. It secretes some hormones and is a reproductive organ, but its main function is gestation. In Guyton and Hall, 13th edition, Chapter 83, page 1025, the uterus is described as the site for pregnancy.",
        "whyNotOtherOptions": {
            "a": "Hormone secretion is secondary (e.g., prostaglandins).",
            "b": "Reproductive organ is too vague; pregnancy is specific.",
            "d": "Gametogenesis occurs in ovaries, not uterus.",
            "e": "Option C is correct, so E is invalid."
        },
        "relatedQuestions": ["84 (Mullerian ducts)", "89 (fertilization)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 89,
        "question": "Usual site of fertilization in the female reproductive system is:",
        "options": [
            "Ovary",
            "Fallopian tubes",
            "Uterus",
            "Vagina",
            "Cervix"
        ],
        "answer": 1,
        "correctAnswer": "Fallopian tubes",
        "explanation": "Fertilization occurs in the ampulla of the fallopian tube, where sperm meets the ovum. In Guyton and Hall, 13th edition, Chapter 84, page 1035, the fallopian tube is the fertilization site.",
        "whyNotOtherOptions": {
            "a": "Ovaries produce eggs, not site of fertilization.",
            "c": "Uterus is for implantation, not fertilization.",
            "d": "Vagina is for sperm deposition, not fertilization.",
            "e": "Cervix is a passage, not fertilization site."
        },
        "relatedQuestions": ["84 (Mullerian ducts)", "Embryology 1 (Mullerian ducts)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 90,
        "question": "Proliferative phase of the endometrial cycle is controlled by which hormone?",
        "options": [
            "Progesterone",
            "FSH",
            "LH",
            "Estrogen",
            "Oxytocin"
        ],
        "answer": 3,
        "correctAnswer": "Estrogen",
        "explanation": "Estrogen drives the proliferative phase, promoting endometrial growth. Progesterone dominates the secretory phase. In Guyton and Hall, 13th edition, Chapter 83, page 1024, estrogen is the key hormone for endometrial proliferation.",
        "whyNotOtherOptions": {
            "a": "Progesterone drives the secretory phase.",
            "b": "FSH stimulates follicle growth, not directly endometrium.",
            "c": "LH triggers ovulation, not proliferation.",
            "e": "Oxytocin affects labor/milk ejection."
        },
        "relatedQuestions": ["85 (LH ovulation)", "88 (uterus)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    }

];

        // State variables
        let questions = [...quizData];
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let isAnswerChecked = false;
        let examSubmitted = false;
        let currentMode = 'exam';
        let examCheckMode = 'immediate';
        let selectedCategories = [];
        let currentPage = 'dashboard';
        let isSearchActive = false;
        let searchResults = [];
        let bookmarkedQuestions = new Set();
        let incorrectQuestions = [];
        let timerInterval = null;
        let startTime = null;
        let remainingTime = 0;
        let isCountdown = false;
        let questionTimers = [];

        // User progress and stats
        let userProgress = {};
        let userStats = {
            correctAnswers: 0,
            totalQuestions: 0
        };

        // DOM elements
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');
        const menuToggle = document.getElementById('menuToggle');
        const themeToggle = document.getElementById('themeToggle');
        const searchInput = document.getElementById('searchInput');
        const quizContainer = document.getElementById('quizContainer');
        const resultsScreen = document.getElementById('resultsScreen');
        const pageTitle = document.getElementById('pageTitle');
        const categoriesGrid = document.getElementById('categoriesGrid');
        const correctAnswersEl = document.getElementById('correctAnswers');

        function init() {
            loadUserData();
            initializeTheme();
            initializeSidebar();
            initializeModeSelector();
            initializeCategories();
            initializeSearch();
            initializeKeyboardNavigation();
            enhanceAccessibility();
            startQuiz();
        }

        function initializeTheme() {
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            document.body.classList.toggle('dark-mode', prefersDark);
            themeToggle.querySelector('i').className = prefersDark ? 'fas fa-moon' : 'fas fa-sun';
            
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                const isDark = document.body.classList.contains('dark-mode');
                themeToggle.querySelector('i').className = isDark ? 'fas fa-moon' : 'fas fa-sun';
            });

            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                document.body.classList.toggle('dark-mode', e.matches);
                themeToggle.querySelector('i').className = e.matches ? 'fas fa-moon' : 'fas fa-sun';
            });
        }

        function initializeSidebar() {
            menuToggle.addEventListener('click', toggleSidebar);
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                    currentPage = item.dataset.page;
                    switch (currentPage) {
                        case 'dashboard':
                            showDashboard();
                            break;
                        case 'courses':
                            showCourses();
                            break;
                        case 'bookmarks':
                            showBookmarks();
                            break;
                        case 'settings':
                            showSettings();
                            break;
                    }
                });
            });
        }

        function toggleSidebar() {
            sidebar.classList.toggle('open');
            mainContent.classList.toggle('sidebar-open');
            overlay.classList.toggle('active');
        }

        function closeSidebar() {
            sidebar.classList.remove('open');
            mainContent.classList.remove('sidebar-open');
            overlay.classList.remove('active');
        }

        function initializeModeSelector() {
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentMode = btn.dataset.mode;
                    startQuiz();
                });
            });
        }

        function showDashboard() {
            currentPage = 'dashboard';
            pageTitle.textContent = 'Medical Quiz Dashboard';
            hideAllSections();
            quizContainer.classList.remove('hidden');
            startQuiz();
        }

        function showCourses() {
            currentPage = 'courses';
            pageTitle.textContent = 'My Courses';
            hideAllSections();
            quizContainer.classList.remove('hidden');
            quizContainer.innerHTML = `
                <div class="courses-container" style="padding: 32px;">
                    <h2 style="font-size: 24px; font-weight: 600; margin-bottom: 24px; color: var(--text-primary);">Available Courses</h2>
                    <div class="courses-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px;">
                        <div class="course-card" style="background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 24px; box-shadow: var(--shadow); cursor: pointer;" onclick="startCourseQuiz('Anatomy')">
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 12px; color: var(--text-primary);">Anatomy Fundamentals</h3>
                            <p style="color: var(--text-secondary); font-size: 14px;">Learn the basics of human anatomy and physiology.</p>
                        </div>
                        <div class="course-card" style="background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 24px; box-shadow: var(--shadow); cursor: pointer;" onclick="startCourseQuiz('Neuroanatomy')">
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 12px; color: var(--text-primary);">Neuroanatomy</h3>
                            <p style="color: var(--text-secondary); font-size: 14px;">Explore the structure of the nervous system.</p>
                        </div>
                    </div>
                </div>
            `;
            closeSidebar();
        }

        function startCourseQuiz(category) {
            selectedCategories = [category];
            startQuiz();
        }

        function showBookmarks() {
            currentPage = 'bookmarks';
            pageTitle.textContent = 'Bookmarked Questions';
            hideAllSections();
            quizContainer.classList.remove('hidden');
            questions = quizData.filter(q => bookmarkedQuestions.has(q.id));
            if (questions.length === 0) {
                quizContainer.innerHTML = `
                    <div style="text-align: center; padding: 80px 20px;">
                        <div style="font-size: 64px; color: var(--text-tertiary); margin-bottom: 24px; opacity: 0.5;">
                            <i class="fas fa-bookmark"></i>
                        </div>
                        <h2 style="font-size: 28px; margin-bottom: 16px; color: var(--text-primary);">No Bookmarked Questions</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 32px;">Bookmark questions to review them later.</p>
                        <button class="quiz-btn" onclick="showDashboard()" style="background: var(--gradient); color: white; padding: 12px 24px;">
                            <i class="fas fa-home"></i>
                            Back to Dashboard
                        </button>
                    </div>
                `;
            } else {
                currentQuestionIndex = 0;
                userAnswers = new Array(questions.length);
                isAnswerChecked = false;
                renderQuizLayout();
            }
            closeSidebar();
        }

        function showSettings() {
            currentPage = 'settings';
            pageTitle.textContent = 'Settings';
            hideAllSections();
            quizContainer.classList.remove('hidden');
            quizContainer.innerHTML = `
                <div style="padding: 32px; max-width: 600px; margin: 0 auto;">
                    <h2 style="font-size: 24px; font-weight: 600; margin-bottom: 24px; color: var(--text-primary);">Settings</h2>
                    <div style="background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 24px;">
                        <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px; color: var(--text-primary);">Preferences</h3>
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <span style="color: var(--text-primary);">Dark Mode</span>
                            <button class="quiz-btn" onclick="document.getElementById('themeToggle').click()" style="padding: 8px 16px;">
                                Toggle Theme
                            </button>
                        </div>
                    </div>
                </div>
            `;
            closeSidebar();
        }

        function hideAllSections() {
            quizContainer.classList.add('hidden');
            resultsScreen.classList.add('hidden');
        }

        function initializeSearch() {
            if (searchInput) {
                searchInput.addEventListener('input', (e) => {
                    const query = e.target.value.trim().toLowerCase();
                    if (query.length === 0) {
                        document.body.classList.remove('search-blur-active');
                        isSearchActive = false;
                        if (currentPage === 'dashboard') {
                            showDashboard();
                        }
                        return;
                    }
                    document.body.classList.add('search-blur-active');
                    if (query.length < 2) {
                        isSearchActive = false;
                        return;
                    }
                    isSearchActive = true;
                    performSearch(query);
                });
                searchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        clearSearch();
                    }
                });
            }
        }

        function performSearch(query) {
            searchResults = quizData.filter(q => 
                q.question.toLowerCase().includes(query) ||
                q.category.toLowerCase().includes(query) ||
                (q.explanation && q.explanation.toLowerCase().includes(query)) ||
                q.options.some(opt => opt.toLowerCase().includes(query))
            );
            if (searchResults.length > 0) {
                questions = searchResults;
                currentQuestionIndex = 0;
                userAnswers = new Array(questions.length);
                isAnswerChecked = false;
                hideAllSections();
                quizContainer.classList.remove('hidden');
                renderQuizLayout();
                pageTitle.textContent = `Search: "${query}" (${searchResults.length} results)`;
                setTimeout(() => highlightSearchTerms(query), 100);
            } else {
                showSearchNoResults(query);
            }
        }

        function showSearchNoResults(query) {
            hideAllSections();
            quizContainer.innerHTML = `
                <div style="text-align: center; padding: 80px 20px;">
                    <div style="font-size: 64px; color: var(--text-tertiary); margin-bottom: 24px; opacity: 0.5;">
                        <i class="fas fa-search"></i>
                    </div>
                    <h2 style="font-size: 28px; margin-bottom: 16px; color: var(--text-primary);">No Results Found</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 32px; max-width: 400px; margin-left: auto; margin-right: auto;">
                        No questions match your search for "<strong style="color: var(--primary);">${query}</strong>". Try different keywords or browse categories.
                    </p>
                    <div style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
                        <button class="quiz-btn" onclick="clearSearch()" style="background: var(--gradient); color: white; padding: 12px 24px;">
                            <i class="fas fa-times"></i>
                            Clear Search
                        </button>
                        <button class="quiz-btn" onclick="toggleSidebar()" style="background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 12px 24px;">
                            <i class="fas fa-folder-open"></i>
                            Browse Categories
                        </button>
                    </div>
                </div>
            `;
            quizContainer.classList.remove('hidden');
            pageTitle.textContent = `Search: "${query}" (0 results)`;
        }

        function clearSearch() {
            searchInput.value = '';
            document.body.classList.remove('search-blur-active');
            isSearchActive = false;
            showDashboard();
        }

        function highlightSearchTerms(query) {
            const questionTexts = document.querySelectorAll('.question-text');
            const optionTexts = document.querySelectorAll('.option-text');
            const categoryElements = document.querySelectorAll('.question-category');
            
            const highlightText = (element) => {
                const originalText = element.textContent;
                const regex = new RegExp(`(${query})`, 'gi');
                const highlighted = originalText.replace(regex, '<mark class="search-highlight">$1</mark>');
                element.innerHTML = highlighted;
            };
            
            questionTexts.forEach(highlightText);
            optionTexts.forEach(highlightText);
            categoryElements.forEach(highlightText);
        }

        function initializeKeyboardNavigation() {
            document.addEventListener('keydown', (e) => {
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
                switch(e.key) {
                    case 'ArrowDown':
                    case 'ArrowUp':
                        e.preventDefault();
                        navigateOptions(e.key === 'ArrowDown' ? 1 : -1);
                        break;
                    case ' ':
                    case 'Enter':
                        e.preventDefault();
                        if (document.activeElement.classList.contains('option')) {
                            document.activeElement.click();
                        }
                        break;
                    case '1':
                    case '2':
                    case '3':
                    case '4':
                    case '5':
                        e.preventDefault();
                        const index = parseInt(e.key) - 1;
                        const options = document.querySelectorAll('.option:not(.disabled)');
                        if (options[index]) {
                            options[index].click();
                        }
                        break;
                }
            });
        }

        function navigateOptions(direction) {
            const options = document.querySelectorAll('.option:not(.disabled)');
            const currentIndex = Array.from(options).findIndex(opt => opt === document.activeElement);
            let nextIndex = currentIndex + direction;
            if (nextIndex < 0) nextIndex = options.length - 1;
            if (nextIndex >= options.length) nextIndex = 0;
            options[nextIndex].focus();
        }

        function enhanceAccessibility() {
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('option')) {
                    const options = e.target.parentElement.querySelectorAll('.option');
                    options.forEach((opt, index) => {
                        opt.setAttribute('aria-checked', opt.classList.contains('selected') ? 'true' : 'false');
                        opt.setAttribute('role', 'radio');
                        opt.setAttribute('tabindex', '0');
                    });
                }
            });
        }

        function loadUserData() {
            const savedProgress = localStorage.getItem('mediQuizProgress');
            const savedStats = localStorage.getItem('mediQuizStats');
            const savedBookmarks = localStorage.getItem('mediQuizBookmarks');
            if (savedProgress) userProgress = JSON.parse(savedProgress);
            if (savedStats) userStats = JSON.parse(savedStats);
            if (savedBookmarks) bookmarkedQuestions = new Set(JSON.parse(savedBookmarks));
            saveUserData();
        }

        function saveUserData() {
            localStorage.setItem('mediQuizProgress', JSON.stringify(userProgress));
            localStorage.setItem('mediQuizStats', JSON.stringify(userStats));
            localStorage.setItem('mediQuizBookmarks', JSON.stringify(Array.from(bookmarkedQuestions)));
        }

        function updateDashboardStats() {
            correctAnswersEl.textContent = userStats.correctAnswers;
        }

        function initializeCategories() {
            const categories = [...new Set(quizData.map(q => q.category))];
            const categoryIcons = {
                "Anatomy Fundamentals": "fas fa-brain",
                "Neuroanatomy": "fas fa-brain",
                "Gastrointestinal System": "fas fa-stomach",
                "Cardiovascular System": "fas fa-heart",
                "General Medicine": "fas fa-stethoscope"
            };
            const categoryColors = {
                "Anatomy Fundamentals": "#6366f1",
                "Neuroanatomy": "#06b6d4",
                "Gastrointestinal System": "#10b981",
                "Cardiovascular System": "#ef4444",
                "General Medicine": "#64748b"
            };

            categoriesGrid.innerHTML = '';
            categories.forEach(category => {
                const categoryQuestions = quizData.filter(q => q.category === category);
                const mastered = categoryQuestions.filter(q =>
                    userProgress[q.id] && userProgress[q.id].correct >= 3
                ).length;
                const progress = categoryQuestions.length > 0 ?
                    Math.round((mastered / categoryQuestions.length) * 100) : 0;
                    
                const categoryCard = document.createElement('div');
                categoryCard.className = 'category-card active glass-effect';
                categoryCard.dataset.category = category;
                categoryCard.style.borderLeft = `4px solid ${categoryColors[category] || '#6366f1'}`;
                categoryCard.innerHTML = `
                    <div class="category-header">
                        <div class="category-icon" style="background: ${categoryColors[category] || '#6366f1'}20; color: ${categoryColors[category] || '#6366f1'}">
                            <i class="${categoryIcons[category] || 'fas fa-question'}"></i>
                        </div>
                        <div class="category-name">${category}</div>
                    </div>
                    <div class="category-stats">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%; background: ${categoryColors[category] || '#6366f1'}"></div>
                        </div>
                        <div class="progress-text">${progress}%</div>
                    </div>
                    <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 8px;">
                        ${categoryQuestions.length} question${categoryQuestions.length !== 1 ? 's' : ''}
                    </div>
                `;
                
                if (categoryQuestions.length > 1) {
                    const dropdown = document.createElement('div');
                    dropdown.className = 'modern-dropdown';
                    dropdown.innerHTML = `
                        <select onchange="jumpToQuestion(this.value)">
                            <option value="">Jump to Question...</option>
                            ${categoryQuestions.sort((a, b) => a.id - b.id).map(q => 
                                `<option value="question-${q.id}">Q${q.id}: ${q.question.substring(0, 50)}${q.question.length > 50 ? '...' : ''}</option>`
                            ).join('')}
                        </select>
                    `;
                    categoryCard.appendChild(dropdown);
                }
                
                categoryCard.addEventListener('click', (e) => {
                    if (!e.target.closest('.modern-dropdown') && !e.target.closest('select')) {
                        toggleCategory(categoryCard);
                        const firstQ = categoryQuestions.sort((a, b) => a.id - b.id)[0];
                        if (firstQ) {
                            jumpToQuestion(`question-${firstQ.id}`);
                        }
                    }
                });
                
                categoriesGrid.appendChild(categoryCard);
            });
            
            selectedCategories = [...categories];
        }

        function toggleCategory(categoryCard) {
            const category = categoryCard.dataset.category;
            if (categoryCard.classList.contains('active')) {
                categoryCard.classList.remove('active');
                selectedCategories = selectedCategories.filter(c => c !== category);
            } else {
                categoryCard.classList.add('active');
                selectedCategories.push(category);
            }
            startQuiz();
            closeSidebar();
        }

        function startQuiz() {
            quizContainer.style.opacity = '0';
            setTimeout(() => {
                questions = selectedCategories.length > 0 ? 
                    quizData.filter(q => selectedCategories.includes(q.category)) : 
                    quizData;
                if (questions.length === 0) {
                    showNoQuestionsMessage();
                    return;
                }
                questions.sort((a, b) => a.id - b.id);
                currentQuestionIndex = 0;
                score = 0;
                userAnswers = new Array(questions.length);
                isAnswerChecked = false;
                examSubmitted = false;
                quizContainer.classList.remove('hidden');
                resultsScreen.classList.add('hidden');
                questionTimers = new Array(questions.length).fill(0);
                if (currentMode === 'exam') {
                    isCountdown = true;
                    remainingTime = 120 * questions.length;
                } else {
                    isCountdown = false;
                }
                startTimer();
                renderQuizLayout();
                quizContainer.style.opacity = '1';
            }, 300);
        }

        function showNoQuestionsMessage() {
            let message = selectedCategories.length === 0 ? 
                'No categories selected. Please select categories from the sidebar.' : 
                'No questions available for the selected categories.';
            quizContainer.innerHTML = `
                <div style="text-align: center; padding: 80px 20px;">
                    <div style="font-size: 64px; color: var(--text-tertiary); margin-bottom: 24px; opacity: 0.5;">
                        <i class="fas fa-inbox"></i>
                    </div>
                    <h2 style="font-size: 28px; margin-bottom: 16px; color: var(--text-primary);">No Questions Available</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 32px; max-width: 400px; margin-left: auto; margin-right: auto;">
                        ${message}
                    </p>
                    <button class="quiz-btn" onclick="toggleSidebar()" style="background: var(--gradient); color: white; padding: 12px 24px;">
                        <i class="fas fa-folder-open"></i>
                        Select Categories
                    </button>
                </div>
            `;
            resultsScreen.classList.add('hidden');
            stopTimer();
            quizContainer.style.opacity = '1';
        }

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            startTime = new Date();
            timerInterval = setInterval(() => {
                if (isCountdown) {
                    remainingTime--;
                    if (remainingTime <= 0) {
                        remainingTime = 0;
                        clearInterval(timerInterval);
                        if (currentMode === 'exam' && !examSubmitted) {
                            showNotification('Time up! Submitting exam.', 'error');
                            submitExam();
                        }
                    }
                    updateTimerDisplay(formatTime(remainingTime), 'timerDisplay', true);
                } else {
                    questionTimers[currentQuestionIndex]++;
                    updateTimerDisplay(formatTime(questionTimers[currentQuestionIndex]), 'timerDisplay', false);
                }
            }, 1000);
        }

        function formatTime(seconds) {
            const min = Math.floor(seconds / 60).toString().padStart(2, '0');
            const sec = (seconds % 60).toString().padStart(2, '0');
            return `${min}:${sec}`;
        }

        function updateTimerDisplay(time, id, isCountdown = false) {
            const el = document.getElementById(id);
            if (el) {
                el.textContent = `Time: ${time}`;
                el.style.color = 'var(--text-primary)';
                if (isCountdown) {
                    el.classList.remove('timer-warning', 'timer-error');
                    if (remainingTime <= 30) {
                        el.classList.add('timer-error');
                    } else if (remainingTime <= 60) {
                        el.classList.add('timer-warning');
                    }
                }
            }
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function renderQuizLayout() {
            if (questions.length === 0) {
                showNoQuestionsMessage();
                return;
            }
            if (currentMode === 'exam') {
                renderExamLayout();
            } else {
                renderSingleQuestionLayout();
            }
        }

        function renderExamLayout() {
            const isImmediateMode = examCheckMode === 'immediate';
            quizContainer.innerHTML = `
                <div class="exam-header" style="margin-bottom: 24px; padding: 20px; background: var(--surface); border-radius: var(--radius); border: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 16px;">
                        <div>
                            <h3 style="font-size: 18px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">
                                Exam Mode: ${questions.length} Questions
                            </h3>
                            <p style="color: var(--text-secondary); font-size: 14px;">
                                ${isImmediateMode ?
                                  'Immediate Check - See explanations as you answer' :
                                  'All-in-One Check - Check all answers at the end'}
                            </p>
                        </div>
                        <div class="exam-mode-toggle" style="display: flex; gap: 8px; background: var(--glass); padding: 4px; border-radius: var(--radius);">
                            <button class="mode-toggle-btn ${isImmediateMode ? 'active' : ''}" data-mode="immediate" style="padding: 8px 16px; border: none; border-radius: 6px; background: ${isImmediateMode ? 'var(--primary)' : 'transparent'}; color: ${isImmediateMode ? 'white' : 'var(--text-secondary)'}; cursor: pointer; font-size: 12px; font-weight: 500;" aria-label="Immediate Check Mode">
                                Immediate Check
                            </button>
                            <button class="mode-toggle-btn ${!isImmediateMode ? 'active' : ''}" data-mode="all-at-once" style="padding: 8px 16px; border: none; border-radius: 6px; background: ${!isImmediateMode ? 'var(--primary)' : 'transparent'}; color: ${!isImmediateMode ? 'white' : 'var(--text-secondary)'}; cursor: pointer; font-size: 12px; font-weight: 500;" aria-label="All-at-Once Check Mode">
                                Check All
                            </button>
                        </div>
                    </div>
                    <div class="progress-info" style="display: flex; align-items: center; gap: 16px;">
                        <span style="font-size: 14px; color: var(--text-secondary);" id="answeredCount">0/${questions.length} answered</span>
                        <div class="progress-bar" style="flex: 1; height: 6px;">
                            <div class="progress-fill" id="examProgressFill" style="width: 0%"></div>
                        </div>
                        <span id="timerDisplay" style="font-size: 14px; color: var(--text-secondary);">Time: ${formatTime(remainingTime)}</span>
                        ${examSubmitted ? `<span style="color: var(--success); font-weight: 600; font-size: 14px;">Submitted!</span>` : ''}
                    </div>
                </div>
                <div class="exam-mode-layout">
                    ${questions.map((question, index) => {
                        const userAnswer = userAnswers[index];
                        const isCorrect = userAnswer === question.answer;
                        const showExplanationButton = examSubmitted || (isImmediateMode && userAnswer !== undefined);
                        return `
                            <div class="question-card fade-in" data-question-index="${index}" id="question-${question.id}">
                                <div class="question-header">
                                    <div class="question-meta">
                                        <div class="question-number">Q${question.id}</div>
                                        <div class="question-category">${question.category}</div>
                                        <div class="question-difficulty" style="padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; background: ${getDifficultyColor(question.difficulty)}; color: white;">
                                            ${question.difficulty}
                                        </div>
                                        ${userAnswer !== undefined ? `
                                            <div class="answer-status ${isCorrect ? 'correct' : 'incorrect'}" style="padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; background: ${isCorrect ? 'var(--success)' : 'var(--error)'}; color: white;">
                                                ${isCorrect ? 'Correct' : 'Incorrect'}
                                            </div>
                                        ` : ''}
                                    </div>
                                    <div class="question-actions">
                                        <div class="action-btn bookmark-btn ${bookmarkedQuestions.has(question.id) ? 'active' : ''}" data-question-id="${question.id}" aria-label="Bookmark Question">
                                            <i class="fas fa-bookmark"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="question-text">${question.question}</div>
                                <div class="options-grid">
                                    ${question.options.map((option, i) => `
                                        <div class="option ${userAnswer === i ? 'selected' : ''} ${examSubmitted || (isImmediateMode && userAnswer !== undefined) ? (i === question.answer ? 'correct' : userAnswer === i ? 'incorrect' : '') : ''} ${examSubmitted || (isImmediateMode && userAnswer !== undefined) ? 'disabled' : ''}" data-option="${i}" role="radio" aria-checked="${userAnswer === i ? 'true' : 'false'}" tabindex="0">
                                            <div class="option-letter">${String.fromCharCode(65 + i)}</div>
                                            <div class="option-text">${option}</div>
                                        </div>
                                    `).join('')}
                                </div>
                                ${showExplanationButton ? `
                                    <details class="explanation-section">
                                        <summary>
                                            <i class="fas fa-info-circle"></i>
                                            Explanation
                                        </summary>
                                        <div class="explanation-content">
                                            <div class="correct-answer">
                                                <strong>Correct Answer:</strong> ${question.correctAnswer}
                                                <p>${question.explanation}</p>
                                            </div>
                                            <div class="why-not-section">
                                                <strong>Why Not the Other Options:</strong>
                                                <ul style="list-style: none; padding-left: 0;">
                                                    ${Object.entries(question.whyNotOtherOptions).map(([key, value]) => `
                                                        <li style="margin-bottom: 8px;">
                                                            <strong>${key.toUpperCase()}:</strong> ${value}
                                                        </li>
                                                    `).join('')}
                                                </ul>
                                            </div>
                                            <div class="related-questions">
                                                <strong>Related Questions:</strong>
                                                <div class="related-questions-list">
                                                    ${question.relatedQuestions.map(q => `
                                                        <span class="related-question-tag" onclick="jumpToQuestionByTag('${q}')">${q}</span>
                                                    `).join('')}
                                                </div>
                                            </div>
                                        </div>
                                    </details>
                                ` : ''}
                            </div>
                        `;
                    }).join('')}
                </div>
                <div class="quiz-controls">
                    <button class="quiz-btn check-btn" id="checkExamBtn" style="${examSubmitted ? 'display: none;' : ''}">
                        <i class="fas fa-check"></i>
                        Check Answers
                    </button>
                    <button class="quiz-btn submit-btn" id="submitExamBtn" style="${examSubmitted ? 'display: none;' : ''}">
                        <i class="fas fa-paper-plane"></i>
                        Submit Exam
                    </button>
                    <button class="quiz-btn restart-btn hidden" id="restartExamBtn">
                        <i class="fas fa-redo"></i>
                        Restart Exam
                    </button>
                </div>
            `;

            // Event listeners for exam mode
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', (e) => {
                    if (option.classList.contains('disabled')) return;
                    const questionIndex = parseInt(option.closest('.question-card').dataset.questionIndex);
                    const selectedOption = parseInt(option.dataset.option);
                    userAnswers[questionIndex] = selectedOption;
                    updateExamProgress();
                    option.parentElement.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    option.setAttribute('aria-checked', 'true');
                    option.parentElement.querySelectorAll('.option').forEach(opt => {
                        if (opt !== option) opt.setAttribute('aria-checked', 'false');
                    });
                    if (isImmediateMode) {
                        checkAnswer(questionIndex);
                    }
                });
            });

            document.querySelectorAll('.bookmark-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const questionId = parseInt(btn.dataset.questionId);
                    toggleBookmark(questionId, btn);
                });
            });

            const checkExamBtn = document.getElementById('checkExamBtn');
            if (checkExamBtn) {
                checkExamBtn.addEventListener('click', () => {
                    checkAllAnswers();
                });
            }

            const submitExamBtn = document.getElementById('submitExamBtn');
            if (submitExamBtn) {
                submitExamBtn.addEventListener('click', submitExam);
            }

            const restartExamBtn = document.getElementById('restartExamBtn');
            if (restartExamBtn) {
                restartExamBtn.addEventListener('click', () => {
                    startQuiz();
                });
            }

            document.querySelectorAll('.mode-toggle-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.mode-toggle-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    examCheckMode = btn.dataset.mode;
                    renderQuizLayout();
                });
            });

            updateExamProgress();
        }

        function renderSingleQuestionLayout() {
            const question = questions[currentQuestionIndex];
            if (!question) {
                showResults();
                return;
            }
            const userAnswer = userAnswers[currentQuestionIndex];
            quizContainer.innerHTML = `
                <div class="question-card fade-in" id="question-${question.id}">
                    <div class="question-header">
                        <div class="question-meta">
                            <div class="question-number">Q${question.id}</div>
                            <div class="question-category">${question.category}</div>
                            <div class="question-difficulty" style="padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; background: ${getDifficultyColor(question.difficulty)}; color: white;">
                                ${question.difficulty}
                            </div>
                            ${userAnswer !== undefined && isAnswerChecked ? `
                                <div class="answer-status ${userAnswer === question.answer ? 'correct' : 'incorrect'}" style="padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; background: ${userAnswer === question.answer ? 'var(--success)' : 'var(--error)'}; color: white;">
                                    ${userAnswer === question.answer ? 'Correct' : 'Incorrect'}
                                </div>
                            ` : ''}
                        </div>
                        <div class="question-actions">
                            <div class="action-btn bookmark-btn ${bookmarkedQuestions.has(question.id) ? 'active' : ''}" data-question-id="${question.id}" aria-label="Bookmark Question">
                                <i class="fas fa-bookmark"></i>
                            </div>
                        </div>
                    </div>
                    <div class="question-text">${question.question}</div>
                    <div class="options-grid">
                        ${question.options.map((option, i) => `
                            <div class="option ${userAnswer === i ? 'selected' : ''} ${isAnswerChecked ? (i === question.answer ? 'correct' : userAnswer === i ? 'incorrect' : '') : ''} ${isAnswerChecked ? 'disabled' : ''}" data-option="${i}" role="radio" aria-checked="${userAnswer === i ? 'true' : 'false'}" tabindex="0">
                                <div class="option-letter">${String.fromCharCode(65 + i)}</div>
                                <div class="option-text">${option}</div>
                            </div>
                        `).join('')}
                    </div>
                    ${isAnswerChecked ? `
                        <details class="explanation-section">
                            <summary>
                                <i class="fas fa-info-circle"></i>
                                Explanation
                            </summary>
                            <div class="explanation-content">
                                <div class="correct-answer">
                                    <strong>Correct Answer:</strong> ${question.correctAnswer}
                                    <p>${question.explanation}</p>
                                </div>
                                <div class="why-not-section">
                                    <strong>Why Not the Other Options:</strong>
                                    <ul style="list-style: none; padding-left: 0;">
                                        ${Object.entries(question.whyNotOtherOptions).map(([key, value]) => `
                                            <li style="margin-bottom: 8px;">
                                                <strong>${key.toUpperCase()}:</strong> ${value}
                                            </li>
                                        `).join('')}
                                    </ul>
                                </div>
                                <div class="related-questions">
                                    <strong>Related Questions:</strong>
                                    <div class="related-questions-list">
                                        ${question.relatedQuestions.map(q => `
                                            <span class="related-question-tag" onclick="jumpToQuestionByTag('${q}')">${q}</span>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        </details>
                    ` : ''}
                    <div class="quiz-controls">
                        <div style="display: flex; align-items: center; gap: 16px;">
                            <span id="timerDisplay" style="font-size: 14px; color: var(--text-primary);">Time: ${formatTime(questionTimers[currentQuestionIndex])}</span>
                            <span style="font-size: 14px; color: var(--text-primary);">${currentQuestionIndex + 1}/${questions.length}</span>
                        </div>
                        <div style="display: flex; gap: 12px;">
                            <button class="quiz-btn check-btn" id="checkBtn" style="${isAnswerChecked || userAnswer === undefined ? 'display: none;' : ''}">
                                <i class="fas fa-check"></i>
                                Check Answer
                            </button>
                            <button class="quiz-btn next-btn" id="nextBtn" style="${!isAnswerChecked ? 'display: none;' : ''}">
                                <i class="fas fa-arrow-right"></i>
                                ${currentQuestionIndex < questions.length - 1 ? 'Next Question' : 'Finish Quiz'}
                            </button>
                        </div>
                    </div>
                </div>
            `;

            // Event listeners for single question mode
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', (e) => {
                    if (option.classList.contains('disabled')) return;
                    userAnswers[currentQuestionIndex] = parseInt(option.dataset.option);
                    option.parentElement.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    option.setAttribute('aria-checked', 'true');
                    option.parentElement.querySelectorAll('.option').forEach(opt => {
                        if (opt !== option) opt.setAttribute('aria-checked', 'false');
                    });
                    document.getElementById('checkBtn').style.display = 'flex';
                });
            });

            const checkBtn = document.getElementById('checkBtn');
            if (checkBtn) {
                checkBtn.addEventListener('click', () => {
                    checkAnswer(currentQuestionIndex);
                });
            }

            const nextBtn = document.getElementById('nextBtn');
            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    if (currentQuestionIndex < questions.length - 1) {
                        currentQuestionIndex++;
                        isAnswerChecked = false;
                        renderSingleQuestionLayout();
                    } else {
                        showResults();
                    }
                });
            }

            document.querySelectorAll('.bookmark-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const questionId = parseInt(btn.dataset.questionId);
                    toggleBookmark(questionId, btn);
                });
            });
        }

        function checkAnswer(index) {
            const question = questions[index];
            const userAnswer = userAnswers[index];
            isAnswerChecked = true;
            if (userAnswer === question.answer) {
                score++;
                userStats.correctAnswers++;
                userProgress[question.id] = userProgress[question.id] || { correct: 0, attempts: 0 };
                userProgress[question.id].correct++;
                userProgress[question.id].attempts++;
                showNotification('Correct answer!', 'success');
            } else {
                incorrectQuestions.push(question.id);
                userProgress[question.id] = userProgress[question.id] || { correct: 0, attempts: 0 };
                userProgress[question.id].attempts++;
                showNotification('Incorrect answer. Check the explanation below.', 'error');
            }
            saveUserData();
            updateDashboardStats();
            initializeCategories();
            renderQuizLayout();
        }

        function checkAllAnswers() {
            score = 0;
            incorrectQuestions = [];
            userAnswers.forEach((answer, index) => {
                const question = questions[index];
                if (answer === question.answer) {
                    score++;
                    userStats.correctAnswers++;
                    userProgress[question.id] = userProgress[question.id] || { correct: 0, attempts: 0 };
                    userProgress[question.id].correct++;
                    userProgress[question.id].attempts++;
                } else if (answer !== undefined) {
                    incorrectQuestions.push(question.id);
                    userProgress[question.id] = userProgress[question.id] || { correct: 0, attempts: 0 };
                    userProgress[question.id].attempts++;
                }
            });
            userStats.totalQuestions += questions.length;
            saveUserData();
            updateDashboardStats();
            initializeCategories();
            examSubmitted = true;
            showNotification('Answers checked! Review the explanations below.', 'info');
            renderQuizLayout();
        }

        function submitExam() {
            checkAllAnswers();
            examSubmitted = true;
            stopTimer();
            showNotification('Exam submitted successfully!', 'success');
            renderQuizLayout();
            document.getElementById('submitExamBtn').style.display = 'none';
            document.getElementById('checkExamBtn').style.display = 'none';
            document.getElementById('restartExamBtn').classList.remove('hidden');
        }

        function updateExamProgress() {
            const answered = userAnswers.filter(a => a !== undefined).length;
            const progressPercent = (answered / questions.length) * 100;
            const answeredCountEl = document.getElementById('answeredCount');
            const progressFillEl = document.getElementById('examProgressFill');
            if (answeredCountEl) {
                answeredCountEl.textContent = `${answered}/${questions.length} answered`;
            }
            if (progressFillEl) {
                progressFillEl.style.width = `${progressPercent}%`;
            }
        }

        function showResults() {
            stopTimer();
            hideAllSections();
            resultsScreen.classList.remove('hidden');
            const percentage = Math.round((score / questions.length) * 100);
            resultsScreen.innerHTML = `
                <div class="results-card fade-in">
                    <div class="results-header">
                        <h2 class="results-title">Quiz Completed!</h2>
                        <p style="color: var(--text-secondary); font-size: 16px;">
                            ${currentMode === 'exam' ? 'Exam' : 'Quiz'} Results
                        </p>
                    </div>
                    <div class="score-display">${score}/${questions.length}</div>
                    <div class="score-text">${percentage}% Correct</div>
                    <div class="results-details">
                        ${questions.map((q, i) => `
                            <div class="result-item">
                                <div class="result-question">Q${q.id}: ${q.question.substring(0, 50)}${q.question.length > 50 ? '...' : ''}</div>
                                <div class="result-status ${userAnswers[i] === q.answer ? 'result-correct' : 'result-incorrect'}">
                                    ${userAnswers[i] === q.answer ? 'Correct' : 'Incorrect'}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
                        <button class="restart-btn" onclick="startQuiz()">
                            <i class="fas fa-redo"></i>
                            Restart ${currentMode === 'exam' ? 'Exam' : 'Quiz'}
                        </button>
                        ${incorrectQuestions.length > 0 ? `
                            <button class="quiz-btn" onclick="reviewIncorrect()" style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white;">
                                <i class="fas fa-redo"></i>
                                Review Incorrect (${incorrectQuestions.length})
                            </button>
                        ` : ''}
                    </div>
                </div>
            `;
            quizContainer.style.opacity = '1';
        }

        function reviewIncorrect() {
            questions = quizData.filter(q => incorrectQuestions.includes(q.id));
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length);
            isAnswerChecked = false;
            hideAllSections();
            quizContainer.classList.remove('hidden');
            renderQuizLayout();
        }

        function getDifficultyColor(difficulty) {
            switch (difficulty.toLowerCase()) {
                case 'easy': return '#22c55e';
                case 'medium': return '#f59e0b';
                case 'hard': return '#ef4444';
                default: return '#6b7280';
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.padding = '16px 24px';
            notification.style.zIndex = '10000';
            notification.style.maxWidth = '320px';
            notification.style.fontSize = '14px';
            notification.style.color = 'var(--text-primary)';
            notification.style.transition = 'all 0.3s ease';
            notification.style.opacity = '0';
            notification.style.transform = 'translateY(-20px)';
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 8px;">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}" style="color: ${type === 'success' ? 'var(--success)' : type === 'error' ? 'var(--error)' : 'var(--info)'}"></i>
                    <span>${message}</span>
                </div>
            `;
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateY(0)';
            }, 100);
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-20px)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        function toggleBookmark(questionId, button) {
            if (bookmarkedQuestions.has(questionId)) {
                bookmarkedQuestions.delete(questionId);
                button.classList.remove('active');
                showNotification('Question removed from bookmarks.', 'info');
            } else {
                bookmarkedQuestions.add(questionId);
                button.classList.add('active');
                showNotification('Question bookmarked!', 'success');
            }
            saveUserData();
        }

        function jumpToQuestion(questionId) {
            const qId = parseInt(questionId.replace('question-', ''));
            const index = questions.findIndex(q => q.id === qId);
            if (index !== -1) {
                currentQuestionIndex = index;
                isAnswerChecked = false;
                renderQuizLayout();
                const questionElement = document.getElementById(`question-${qId}`);
                if (questionElement) {
                    questionElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
        }

        function jumpToQuestionByTag(tag) {
            const question = quizData.find(q => q.relatedQuestions.includes(tag));
            if (question) {
                jumpToQuestion(`question-${question.id}`);
            }
        }

        // Initialize the app
        init();
    </script>
</body>
</html>
</xaiArtifact>